2021-06-05 18:04:38,034 p=1071254 u=snelson n=ansible | ansible-playbook 2.9.6
  config file = /home/snelson/sl-infraop/ansible/ansible.cfg
  configured module search path = ['/home/snelson/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]
2021-06-05 18:04:38,035 p=1071254 u=snelson n=ansible | Using /home/snelson/sl-infraop/ansible/ansible.cfg as config file
2021-06-05 18:04:39,747 p=1071254 u=snelson n=ansible | host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:04:39,747 p=1071254 u=snelson n=ansible | script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:04:39,747 p=1071254 u=snelson n=ansible | auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:04:39,752 p=1071254 u=snelson n=ansible | Parsed /etc/ansible/hosts inventory source with ini plugin
2021-06-05 18:04:39,753 p=1071254 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:04:39,996 p=1071254 u=snelson n=ansible | PLAYBOOK: playbook.yml *********************************************************************************************
2021-06-05 18:04:39,997 p=1071254 u=snelson n=ansible | 3 plays in playbook.yml
2021-06-05 18:04:39,999 p=1071254 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:04:40,013 p=1071254 u=snelson n=ansible | META: ran handlers
2021-06-05 18:04:40,017 p=1071254 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:04:40,018 p=1071254 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:5
2021-06-05 18:04:40,176 p=1071254 u=snelson n=ansible | TASK [ec2 : Check for EC2 Key Pair on control machine path={{ ec2_keypair_destination }}] **************************
2021-06-05 18:04:40,177 p=1071254 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:3
2021-06-05 18:04:40,236 p=1071288 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:04:40,236 p=1071288 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:04:40,247 p=1071288 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896 `" && echo ansible-tmp-1622916280.2358124-221233021487896="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896 `" ) && sleep 0'
2021-06-05 18:04:40,423 p=1071288 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:04:40,424 p=1071288 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1071254kmfqkhgi/tmp0ukh7vlz TO /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896/AnsiballZ_stat.py
2021-06-05 18:04:40,425 p=1071288 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896/ /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:04:40,435 p=1071288 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-kuybzkttjmzmqvfedsfggykazovuzyss ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896/AnsiballZ_stat.py'"'"' && sleep 0'
2021-06-05 18:04:40,633 p=1071288 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916280.2358124-221233021487896/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:04:40,650 p=1071254 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1",
            "follow": false,
            "get_attributes": true,
            "get_checksum": true,
            "get_md5": false,
            "get_mime": true,
            "path": "./ec2_keypair.pem"
        }
    },
    "stat": {
        "exists": false
    }
}
2021-06-05 18:04:40,654 p=1071254 u=snelson n=ansible | TASK [ec2 : Show keypair var=ec2_keypair_stat] *********************************************************************
2021-06-05 18:04:40,655 p=1071254 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:9
2021-06-05 18:04:40,713 p=1071254 u=snelson n=ansible | ok: [localhost] => {
    "ec2_keypair_stat": {
        "changed": false,
        "failed": false,
        "stat": {
            "exists": false
        }
    }
}
2021-06-05 18:04:40,718 p=1071254 u=snelson n=ansible | TASK [ec2 : Create EC2 Key Pair name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:04:40,718 p=1071254 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:13
2021-06-05 18:04:40,783 p=1071317 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:04:40,783 p=1071317 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:04:40,792 p=1071317 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884 `" && echo ansible-tmp-1622916280.782301-154569715530884="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884 `" ) && sleep 0'
2021-06-05 18:04:40,998 p=1071317 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:04:41,000 p=1071317 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1071254kmfqkhgi/tmpun85e9w1 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884/AnsiballZ_ec2_key.py
2021-06-05 18:04:41,002 p=1071317 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884/ /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:04:41,016 p=1071317 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-ujgpswthzksnbxobyswjpbpzkeyfnudo ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:04:41,864 p=1071317 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916280.782301-154569715530884/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:04:41,878 p=1071254 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": {
        "fingerprint": "2a:60:2d:2f:65:98:80:30:16:97:a4:42:c9:e7:de:02:a8:bf:f7:f1",
        "name": "ec2_keypair"
    },
    "msg": "key pair already exists"
}
2021-06-05 18:04:41,882 p=1071254 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:04:41,883 p=1071254 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:23
2021-06-05 18:04:41,944 p=1071254 u=snelson n=ansible | skipping: [localhost] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
2021-06-05 18:04:41,948 p=1071254 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:04:41,948 p=1071254 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:31
2021-06-05 18:04:42,010 p=1071369 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:04:42,011 p=1071369 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:04:42,025 p=1071369 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916282.0094388-198799973780067 `" && echo ansible-tmp-1622916282.0094388-198799973780067="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916282.0094388-198799973780067 `" ) && sleep 0'
2021-06-05 18:04:42,217 p=1071369 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2021-06-05 18:04:42,223 p=1071369 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1071254kmfqkhgi/tmpsqxdljyq TO /home/snelson/.ansible/tmp/ansible-tmp-1622916282.0094388-198799973780067/AnsiballZ_ec2_vpc_net.py
2021-06-05 18:04:42,224 p=1071369 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916282.0094388-198799973780067/ /home/snelson/.ansible/tmp/ansible-tmp-1622916282.0094388-198799973780067/AnsiballZ_ec2_vpc_net.py && sleep 0'
2021-06-05 18:04:42,233 p=1071369 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-kyhntbfoubetvynumqjsxaehlxcjgujb ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916282.0094388-198799973780067/AnsiballZ_ec2_vpc_net.py'"'"' && sleep 0'
2021-06-05 18:04:43,228 p=1071254 u=snelson n=ansible |  [ERROR]: User interrupted execution

2021-06-05 18:06:12,634 p=1072046 u=snelson n=ansible | ansible-playbook 2.9.6
  config file = /home/snelson/sl-infraop/ansible/ansible.cfg
  configured module search path = ['/home/snelson/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]
2021-06-05 18:06:12,634 p=1072046 u=snelson n=ansible | Using /home/snelson/sl-infraop/ansible/ansible.cfg as config file
2021-06-05 18:06:14,577 p=1072046 u=snelson n=ansible | host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:06:14,578 p=1072046 u=snelson n=ansible | script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:06:14,578 p=1072046 u=snelson n=ansible | auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:06:14,581 p=1072046 u=snelson n=ansible | Parsed /etc/ansible/hosts inventory source with ini plugin
2021-06-05 18:06:14,581 p=1072046 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:06:14,842 p=1072046 u=snelson n=ansible | PLAYBOOK: playbook.yml *********************************************************************************************
2021-06-05 18:06:14,842 p=1072046 u=snelson n=ansible | 3 plays in playbook.yml
2021-06-05 18:06:14,845 p=1072046 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:06:14,859 p=1072046 u=snelson n=ansible | META: ran handlers
2021-06-05 18:06:14,864 p=1072046 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:06:14,864 p=1072046 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:5
2021-06-05 18:06:15,009 p=1072046 u=snelson n=ansible | TASK [ec2 : Check for EC2 Key Pair on control machine path={{ ec2_keypair_destination }}] **************************
2021-06-05 18:06:15,010 p=1072046 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:3
2021-06-05 18:06:15,076 p=1072062 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:06:15,076 p=1072062 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:06:15,086 p=1072062 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952 `" && echo ansible-tmp-1622916375.0750458-213785757087952="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952 `" ) && sleep 0'
2021-06-05 18:06:15,272 p=1072062 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:06:15,273 p=1072062 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-10720468cyeema8/tmpxb3vt7vj TO /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952/AnsiballZ_stat.py
2021-06-05 18:06:15,274 p=1072062 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952/ /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:06:15,284 p=1072062 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-qbvhbdeuardogygnqfkixngsuwgznnhu ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952/AnsiballZ_stat.py'"'"' && sleep 0'
2021-06-05 18:06:15,502 p=1072062 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916375.0750458-213785757087952/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:06:15,519 p=1072046 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1",
            "follow": false,
            "get_attributes": true,
            "get_checksum": true,
            "get_md5": false,
            "get_mime": true,
            "path": "./ec2_keypair.pem"
        }
    },
    "stat": {
        "exists": false
    }
}
2021-06-05 18:06:15,524 p=1072046 u=snelson n=ansible | TASK [ec2 : Show keypair var=ec2_keypair_stat] *********************************************************************
2021-06-05 18:06:15,524 p=1072046 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:9
2021-06-05 18:06:15,586 p=1072046 u=snelson n=ansible | ok: [localhost] => {
    "ec2_keypair_stat": {
        "changed": false,
        "failed": false,
        "stat": {
            "exists": false
        }
    }
}
2021-06-05 18:06:15,590 p=1072046 u=snelson n=ansible | TASK [ec2 : Create EC2 Key Pair name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:06:15,590 p=1072046 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:13
2021-06-05 18:06:15,654 p=1072091 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:06:15,655 p=1072091 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:06:15,664 p=1072091 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954 `" && echo ansible-tmp-1622916375.6533144-22218841416954="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954 `" ) && sleep 0'
2021-06-05 18:06:15,860 p=1072091 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:06:15,861 p=1072091 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-10720468cyeema8/tmp9iwme1ni TO /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954/AnsiballZ_ec2_key.py
2021-06-05 18:06:15,861 p=1072091 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954/ /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:06:15,872 p=1072091 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-awnbjygbuubkhekvyvhosmkqoqsjnslm ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:06:16,758 p=1072091 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916375.6533144-22218841416954/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:06:16,774 p=1072046 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": {
        "fingerprint": "2a:60:2d:2f:65:98:80:30:16:97:a4:42:c9:e7:de:02:a8:bf:f7:f1",
        "name": "ec2_keypair"
    },
    "msg": "key pair already exists"
}
2021-06-05 18:06:16,783 p=1072046 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:06:16,783 p=1072046 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:23
2021-06-05 18:06:16,855 p=1072046 u=snelson n=ansible | fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: 'dict object' has no attribute 'private_key'\n\nThe error appears to be in '/home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml': line 23, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Save EC2 private key\n  ^ here\n"
}
2021-06-05 18:06:16,858 p=1072046 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:06:16,858 p=1072046 u=snelson n=ansible | localhost                  : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-06-05 18:14:19,542 p=1075522 u=snelson n=ansible | ansible-playbook 2.9.6
  config file = /home/snelson/sl-infraop/ansible/ansible.cfg
  configured module search path = ['/home/snelson/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]
2021-06-05 18:14:19,542 p=1075522 u=snelson n=ansible | Using /home/snelson/sl-infraop/ansible/ansible.cfg as config file
2021-06-05 18:14:21,551 p=1075522 u=snelson n=ansible | host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:14:21,552 p=1075522 u=snelson n=ansible | script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:14:21,552 p=1075522 u=snelson n=ansible | auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:14:21,555 p=1075522 u=snelson n=ansible | Parsed /etc/ansible/hosts inventory source with ini plugin
2021-06-05 18:14:21,556 p=1075522 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:14:21,812 p=1075522 u=snelson n=ansible | PLAYBOOK: playbook.yml *********************************************************************************************
2021-06-05 18:14:21,813 p=1075522 u=snelson n=ansible | 3 plays in playbook.yml
2021-06-05 18:14:21,815 p=1075522 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:14:21,832 p=1075522 u=snelson n=ansible | META: ran handlers
2021-06-05 18:14:21,837 p=1075522 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:14:21,837 p=1075522 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:5
2021-06-05 18:14:21,956 p=1075522 u=snelson n=ansible | TASK [ec2 : Check for EC2 private key on control machine path={{ ec2_keypair_destination }}] ***********************
2021-06-05 18:14:21,956 p=1075522 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:3
2021-06-05 18:14:22,029 p=1075545 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:22,029 p=1075545 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:22,053 p=1075545 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527 `" && echo ansible-tmp-1622916862.027992-19233639160527="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527 `" ) && sleep 0'
2021-06-05 18:14:22,278 p=1075545 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:14:22,279 p=1075545 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmpb4dbq8jk TO /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527/AnsiballZ_stat.py
2021-06-05 18:14:22,280 p=1075545 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527/ /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:14:22,290 p=1075545 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-rczshlnizneackzpcdyazknyqcvrnwrk ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527/AnsiballZ_stat.py'"'"' && sleep 0'
2021-06-05 18:14:22,531 p=1075545 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916862.027992-19233639160527/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:22,545 p=1075522 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1",
            "follow": false,
            "get_attributes": true,
            "get_checksum": true,
            "get_md5": false,
            "get_mime": true,
            "path": "./ec2_keypair.pem"
        }
    },
    "stat": {
        "exists": false
    }
}
2021-06-05 18:14:22,551 p=1075522 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS if not found on control machine name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:14:22,552 p=1075522 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:8
2021-06-05 18:14:22,610 p=1075572 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:22,611 p=1075572 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:22,620 p=1075572 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807 `" && echo ansible-tmp-1622916862.6101892-277059720732807="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807 `" ) && sleep 0'
2021-06-05 18:14:22,824 p=1075572 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:14:22,825 p=1075572 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmpyd_4_869 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807/AnsiballZ_ec2_key.py
2021-06-05 18:14:22,826 p=1075572 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807/ /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:14:22,835 p=1075572 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-xmwwhrvwsosloamoxfqvgxxzkxltcbaw ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:14:23,968 p=1075572 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916862.6101892-277059720732807/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:23,984 p=1075522 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "absent",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": null,
    "msg": "key deleted"
}
2021-06-05 18:14:23,988 p=1075522 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:14:23,989 p=1075522 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:19
2021-06-05 18:14:24,061 p=1075599 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:24,061 p=1075599 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:24,072 p=1075599 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029 `" && echo ansible-tmp-1622916864.0605838-248876478085029="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029 `" ) && sleep 0'
2021-06-05 18:14:24,085 p=1075599 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:14:24,085 p=1075599 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmpe412h2e1 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029/AnsiballZ_ec2_key.py
2021-06-05 18:14:24,087 p=1075599 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029/ /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:14:24,097 p=1075599 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-sdvwbuiaresdajzxeyqdmopgdqxlwvqo ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:14:25,198 p=1075599 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916864.0605838-248876478085029/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:25,216 p=1075522 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": {
        "fingerprint": "2e:cf:fd:62:56:72:1e:cd:d2:59:97:81:d5:0e:cc:1f:11:9c:27:44",
        "name": "ec2_keypair",
        "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAiS/QwzIWNiBK5Kc+U5Qu53IDM43Cwrt9MtzlQc0/kDwzJ0YT\nv+sT0zoHyxOGF9ealp4bbAcYTzv6GG2HJRsNOoOARI2A4DZBQPI9u3vNIYlkakNi\n6WKijE700fc4r3OPpn5eHQyx0SdPjlUAfvKrSS/uSvvsCeJZfgaztpYOK1KFxKYC\naaLE4vajQOUhafwSBzWNTQXaerPOZ38etDYysvNXKTYssMh3T0TzQbt89mJ/mlOi\naWvHKPcLDl8k8lqd0uIZIF3mIFyV9wnPxd0VBZMBJ/MAwqAXHwj6tmkIPS3upfHL\nmXVwCqbl3JJeM6lBK2c+be6x+j+B6qmE+txj7wIDAQABAoIBAB99vmpQYRDjsM10\nJraA2ZN/dIStEfwplb/LPUUxnFm7t/JX/8iaad6e/5L6VFm8wFu6x4iwyD/IAM0C\nt3cpEoxQC22xHdhaG/iQouMatCfypf5OobH5Vl7m8QQRwA1mdZ8+etQoSdk9MOH3\nWTnK8s7GFelYkwJh1zE60J4lK/N9kgBPyrN9bGnES5EcD/tYx3ynOOiMfZOo/LaJ\nRZpxOnoWI7SQz+YEzcjeRXP20Thl/6yfU0SYmd8noP/e5mk78IKpYfcoiVxf1zeI\nws5pc9398izhbZ+ILmPZDorKbnCciL0nsYIZD4haHEvy/AIFI29q3S3QgoWgu9XN\ncxFhF0ECgYEA5+IAv0/E+GCXh6uJUBs+URp9XfMxdNVfgEdPzwrCkpFB5l3SecCe\nBHXC42mIM68ddYd7l+ncTutUQ1/hDMAW9lsd4YaBx3slOt4iPBCB8PIHc3khWGu/\nD76CObyXwFbhnHSM0zpw1R0bV7UOEa8LbEDgdk4mMTdZQVjSnnHS3ScCgYEAl3R7\njchjWRTW83fS6pIL6hSyX2j8HKzowMI39Axw4x8HLK5zwUCKfpjGf2+2f9A72Vxw\n/UtsX4lecCftAUFnOTkc1GsOI978E5HKvqw7CuaoeqTjT/jZCELtONgtA6UKEaL9\nqs/3KxHdbcmYuEBB/AuRY9mT0DoqXMY6rASCD/kCgYEAmuuChk58EVkvQ8QV/EAH\nVVY2VfNpol3/7Qs3xeKxdgy4E3mxagiHSgGHUDosdiNTsjbvGuJyfwN4i37eM4+O\nh87+WrNrt2ONzxOjma+JsPlygvJ1lcZ+or0r8fkPBcDGAKpZf7H2uls07lcXbDcf\nkZaSoFe76nvJFQCLzrHLKFcCgYB8InG+JLcg5U7EoLpTnj57rlkAkFjK3AGtM8KO\nmb/Qt7a2rYmcpFyfJHLVMmffXHohTn4hbTc3Gq03udGsjMGhCimSBOjDB9mN5JnL\nK/j8l08RrqHNA0ZHWit6wtwqN5QIHpJQ9UE9oNffSzOMGMa8YXLZ5xQawAHGpoai\nRNOhaQKBgA1AY2Wng1E/SnlGpoqJbWeic2fI8iSkSqVNlK6+CL0YtPpHfuiGOjEC\nYwIgRuz768is6HS7p4nsoKdg2dBG7m/ZrOgtyBLEWtSDUY5zrQKAZ1KgD28h0Bbr\nJE1lG82xMlgfEjDCWXmzE7Lv3vwK8fKl+AfK4QhPGvcJSI+EnG9t\n-----END RSA PRIVATE KEY-----"
    },
    "msg": "key pair created"
}
2021-06-05 18:14:25,221 p=1075522 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:14:25,221 p=1075522 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:29
2021-06-05 18:14:25,286 p=1075643 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:25,287 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:25,296 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871 `" && echo ansible-tmp-1622916865.285821-8691570769871="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871 `" ) && sleep 0'
2021-06-05 18:14:25,309 p=1075643 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:14:25,310 p=1075643 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmp799zk9bi TO /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/AnsiballZ_stat.py
2021-06-05 18:14:25,311 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/ /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:14:25,321 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:14:25,516 p=1075643 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmpt484uk33 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/source
2021-06-05 18:14:25,517 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/ /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/source && sleep 0'
2021-06-05 18:14:25,680 p=1075643 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/copy.py
2021-06-05 18:14:25,681 p=1075643 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmp6j7f0lwr TO /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/AnsiballZ_copy.py
2021-06-05 18:14:25,681 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/ /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/AnsiballZ_copy.py && sleep 0'
2021-06-05 18:14:25,692 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/AnsiballZ_copy.py && sleep 0'
2021-06-05 18:14:25,896 p=1075643 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:25,912 p=1075522 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "checksum": "f00410cd965771701e041273840cb779855ed1c2",
    "dest": "./ec2_keypair.pem",
    "diff": [],
    "gid": 1002,
    "group": "snelson",
    "invocation": {
        "module_args": {
            "_original_basename": "tmpt484uk33",
            "attributes": null,
            "backup": false,
            "checksum": "f00410cd965771701e041273840cb779855ed1c2",
            "content": null,
            "delimiter": null,
            "dest": "./ec2_keypair.pem",
            "directory_mode": null,
            "follow": false,
            "force": true,
            "group": null,
            "local_follow": null,
            "mode": 384,
            "owner": null,
            "regexp": null,
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": "/home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/source",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "md5sum": "21d08d623e8b46962ee390aa26bd50d4",
    "mode": "0600",
    "owner": "snelson",
    "size": 1674,
    "src": "/home/snelson/.ansible/tmp/ansible-tmp-1622916865.285821-8691570769871/source",
    "state": "file",
    "uid": 1001
}
2021-06-05 18:14:25,916 p=1075522 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:14:25,917 p=1075522 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:38
2021-06-05 18:14:25,985 p=1075688 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:25,986 p=1075688 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:25,996 p=1075688 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916865.9852538-173373168320663 `" && echo ansible-tmp-1622916865.9852538-173373168320663="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916865.9852538-173373168320663 `" ) && sleep 0'
2021-06-05 18:14:26,237 p=1075688 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2021-06-05 18:14:26,238 p=1075688 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075522orb1892f/tmpz7ttxvma TO /home/snelson/.ansible/tmp/ansible-tmp-1622916865.9852538-173373168320663/AnsiballZ_ec2_vpc_net.py
2021-06-05 18:14:26,239 p=1075688 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916865.9852538-173373168320663/ /home/snelson/.ansible/tmp/ansible-tmp-1622916865.9852538-173373168320663/AnsiballZ_ec2_vpc_net.py && sleep 0'
2021-06-05 18:14:26,250 p=1075688 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-quzjelfiwviwxgfxeezzwwqilwpzhijj ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916865.9852538-173373168320663/AnsiballZ_ec2_vpc_net.py'"'"' && sleep 0'
2021-06-05 18:14:26,766 p=1075522 u=snelson n=ansible |  [ERROR]: User interrupted execution

2021-06-05 18:14:36,889 p=1075795 u=snelson n=ansible | ansible-playbook 2.9.6
  config file = /home/snelson/sl-infraop/ansible/ansible.cfg
  configured module search path = ['/home/snelson/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]
2021-06-05 18:14:36,889 p=1075795 u=snelson n=ansible | Using /home/snelson/sl-infraop/ansible/ansible.cfg as config file
2021-06-05 18:14:38,797 p=1075795 u=snelson n=ansible | host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:14:38,797 p=1075795 u=snelson n=ansible | script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:14:38,797 p=1075795 u=snelson n=ansible | auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:14:38,800 p=1075795 u=snelson n=ansible | Parsed /etc/ansible/hosts inventory source with ini plugin
2021-06-05 18:14:38,801 p=1075795 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:14:39,067 p=1075795 u=snelson n=ansible | PLAYBOOK: playbook.yml *********************************************************************************************
2021-06-05 18:14:39,067 p=1075795 u=snelson n=ansible | 3 plays in playbook.yml
2021-06-05 18:14:39,071 p=1075795 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:14:39,091 p=1075795 u=snelson n=ansible | META: ran handlers
2021-06-05 18:14:39,098 p=1075795 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:14:39,098 p=1075795 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:5
2021-06-05 18:14:39,213 p=1075795 u=snelson n=ansible | TASK [ec2 : Check for EC2 private key on control machine path={{ ec2_keypair_destination }}] ***********************
2021-06-05 18:14:39,213 p=1075795 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:3
2021-06-05 18:14:39,274 p=1075821 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:39,275 p=1075821 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:39,284 p=1075821 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787 `" && echo ansible-tmp-1622916879.2725685-263099161123787="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787 `" ) && sleep 0'
2021-06-05 18:14:39,505 p=1075821 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:14:39,506 p=1075821 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmpwlrung33 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787/AnsiballZ_stat.py
2021-06-05 18:14:39,507 p=1075821 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787/ /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:14:39,518 p=1075821 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-xonnbyvcmncbnummjxwrtpzdickzwcyc ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787/AnsiballZ_stat.py'"'"' && sleep 0'
2021-06-05 18:14:39,725 p=1075821 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916879.2725685-263099161123787/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:39,738 p=1075795 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1",
            "follow": false,
            "get_attributes": true,
            "get_checksum": true,
            "get_md5": false,
            "get_mime": true,
            "path": "./ec2_keypair.pem"
        }
    },
    "stat": {
        "exists": false
    }
}
2021-06-05 18:14:39,746 p=1075795 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS if not found on control machine name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:14:39,747 p=1075795 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:8
2021-06-05 18:14:39,806 p=1075848 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:39,807 p=1075848 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:39,815 p=1075848 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385 `" && echo ansible-tmp-1622916879.8060253-236135838091385="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385 `" ) && sleep 0'
2021-06-05 18:14:40,020 p=1075848 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:14:40,021 p=1075848 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmp1yg1cisw TO /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385/AnsiballZ_ec2_key.py
2021-06-05 18:14:40,022 p=1075848 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385/ /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:14:40,041 p=1075848 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-fnpwkshsgsftmirhelrzwvqbzlombjed ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:14:40,999 p=1075848 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916879.8060253-236135838091385/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:41,013 p=1075795 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "absent",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": null,
    "msg": "key deleted"
}
2021-06-05 18:14:41,018 p=1075795 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:14:41,018 p=1075795 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:19
2021-06-05 18:14:41,084 p=1075882 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:41,084 p=1075882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:41,102 p=1075882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729 `" && echo ansible-tmp-1622916881.0835574-117308907702729="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729 `" ) && sleep 0'
2021-06-05 18:14:41,115 p=1075882 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:14:41,116 p=1075882 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmpbx_eqv0q TO /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729/AnsiballZ_ec2_key.py
2021-06-05 18:14:41,117 p=1075882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729/ /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:14:41,127 p=1075882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-zrdxcovgeozwcccqojqoeokmqqclrbfx ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:14:42,154 p=1075882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916881.0835574-117308907702729/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:42,167 p=1075795 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": {
        "fingerprint": "56:0c:f4:1e:38:e4:37:2d:05:8a:c1:41:a8:2c:62:1a:ac:38:d5:14",
        "name": "ec2_keypair",
        "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEApmNWswv34DIWmNVKNSu2XBZ8MSpa/GzNhcYFYFs88XM05E5e\nD58bRlV0rh9UmICYs02KPEzN8xJVMaCsoZ6U/vhafLqn/JcjQbJ93gDMaN8h8ave\nXaRPHVpAQkxvZUjwqJ9gT62MrpMhUZlxmQGmfWHmQR+1+cVORk4fQ/xnVLcITT1q\nP0xilbb97jJWvbM5pmXTwlhIGT6691It7wGfdEXd+M/rTuZJjdGSrFec/ZTkOZxB\nviUgJNWeWVoAWtxEW3eo73cq15C6pke5Uz5/pqW7vJMhnWZaHDC4/O3kz/bu4oqi\nbXKimI5pgc+54sSvQhHOv5vUVYFAUq42x6TlQQIDAQABAoIBAQCOPG1pMdn8NdVL\nYUnGmk+R+UbBYMvW7cvjh5wg+t3mKe4VHUkbYZAXWAYes3nFxGjFHowFcEK+f/WE\nLy5kGwST0grIhWgFbc4d40/l8BjNrbF+vsWgl01qcjRseJrhorDX9SaH9nxE4FGj\nR+DsQ5TnqkEDevA9TIXVZAMmQyayK0Np2eTzdtKguyfUwLhTCs5YRlfwUrLraa4Q\nKVtdOF8LSsoH4xa2zogZGNPHcno3ixqbdusJPM+kZGUxIYSypIpRh9rustSOjo5k\nA2x/gTjQCC2jk/gUf3D5PiycbimOswRyCJlVdLGbWf0lDMmekVAe+vtN0OLNhUFg\nF8soKioBAoGBAN8AdzlhD/Tct/MiA8HYcObPkkjA4HJOzhmhCJd23xBB/jM0H2dI\nDxT7OFX4eWvoeL765YT22xt3jnQB8WQn1+khMSOnoB6j8EqG5WddkozV/w3e+YrW\n0WQqO9HThD78HZ53sF/hpT5SF2DyxbiiEdS3GDiJX9X8AV84153HNuGJAoGBAL8C\nSSz3/ZkUbq5P2nGQw7Am5goLCJ4f/vi7xNZyx+GvnwwtXKBsAMY2ZpXJqcNekA3R\nu+9oUWYE9PG6VZxvqElJnnQRyMaqkJ+Pa09/Pc32CwkOGiOMwLrCG+rzoGGE53Jk\nI8t00VgQv4VwB+1jOv5LBlWT3v4skn3BJg4XCI/5AoGAETNY/t0EvQ9VRPSns4j9\nVGBIWUI/TbHUZdes8PnjRL7CW7K2hWHif+zMsJzkyLT6s0ho8bOUvO6g10PbGa2V\nEs9Tmftw90wP2b/D7BAkoKZU8P3044ekSQSU7p9RAQazRijXOt4Nv9vXH8w6Af7G\nP1EMFjhKYxf4Bx88Slg2XHkCgYAr4AyLBdP869KYu8MDvysUNXs1517tY5Af9pG6\naNc9Iig4ldrnBqgO38QkuBQEyp3wbrLqxV2dP5o8RH8R1hwj6YM6SjOCXv+lhz4x\nHptFyjSyuciLTfOfcqMTDy9R90Nq5VHLlGPaBM7ZiehoQRj1/KnR0ouwevCTbmCd\nb/EJkQKBgHIsm1WynPxGhACaMYBYbNmbXg1L9HVIje3ZVoC+xeGUGszsp4Qv9dHI\nRmHyv48GB+/UghRG3ggLLU3pwhl1OPiy1ZFIwe/U0sPU0ymZ+r8eV2sOlft1lS+N\nS9jtCwg2KB/LCZD8NJpQ96DlD6mAZi2fHX0KitR0h5w1mVmb17ly\n-----END RSA PRIVATE KEY-----"
    },
    "msg": "key pair created"
}
2021-06-05 18:14:42,171 p=1075795 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:14:42,172 p=1075795 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:29
2021-06-05 18:14:42,247 p=1075918 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:42,247 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:42,256 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304 `" && echo ansible-tmp-1622916882.2465372-196422765359304="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304 `" ) && sleep 0'
2021-06-05 18:14:42,269 p=1075918 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:14:42,270 p=1075918 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmpfzm92ymh TO /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/AnsiballZ_stat.py
2021-06-05 18:14:42,271 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/ /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:14:42,280 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:14:42,478 p=1075918 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmptyrij4l0 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/source
2021-06-05 18:14:42,480 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/ /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/source && sleep 0'
2021-06-05 18:14:42,624 p=1075918 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/copy.py
2021-06-05 18:14:42,624 p=1075918 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmprs7m8_gg TO /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/AnsiballZ_copy.py
2021-06-05 18:14:42,625 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/ /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/AnsiballZ_copy.py && sleep 0'
2021-06-05 18:14:42,635 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/AnsiballZ_copy.py && sleep 0'
2021-06-05 18:14:42,836 p=1075918 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:14:42,851 p=1075795 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "checksum": "d41dd115c318eece215b8ba976519d7993ac0707",
    "dest": "./ec2_keypair.pem",
    "diff": [],
    "gid": 1002,
    "group": "snelson",
    "invocation": {
        "module_args": {
            "_original_basename": "tmptyrij4l0",
            "attributes": null,
            "backup": false,
            "checksum": "d41dd115c318eece215b8ba976519d7993ac0707",
            "content": null,
            "delimiter": null,
            "dest": "./ec2_keypair.pem",
            "directory_mode": null,
            "follow": false,
            "force": true,
            "group": null,
            "local_follow": null,
            "mode": 384,
            "owner": null,
            "regexp": null,
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": "/home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/source",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "md5sum": "b48e5563f80e9903ec244ccc970b6935",
    "mode": "0600",
    "owner": "snelson",
    "size": 1674,
    "src": "/home/snelson/.ansible/tmp/ansible-tmp-1622916882.2465372-196422765359304/source",
    "state": "file",
    "uid": 1001
}
2021-06-05 18:14:42,855 p=1075795 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:14:42,856 p=1075795 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:38
2021-06-05 18:14:42,924 p=1075956 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:14:42,924 p=1075956 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:14:42,935 p=1075956 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916882.9230206-140862304031993 `" && echo ansible-tmp-1622916882.9230206-140862304031993="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622916882.9230206-140862304031993 `" ) && sleep 0'
2021-06-05 18:14:43,220 p=1075956 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2021-06-05 18:14:43,221 p=1075956 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1075795b9e22huz/tmp4avknav7 TO /home/snelson/.ansible/tmp/ansible-tmp-1622916882.9230206-140862304031993/AnsiballZ_ec2_vpc_net.py
2021-06-05 18:14:43,222 p=1075956 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622916882.9230206-140862304031993/ /home/snelson/.ansible/tmp/ansible-tmp-1622916882.9230206-140862304031993/AnsiballZ_ec2_vpc_net.py && sleep 0'
2021-06-05 18:14:43,232 p=1075956 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-nvripurcwgdqfmrodtndugjxaltppjhc ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622916882.9230206-140862304031993/AnsiballZ_ec2_vpc_net.py'"'"' && sleep 0'
2021-06-05 18:14:43,336 p=1075795 u=snelson n=ansible |  [ERROR]: User interrupted execution

2021-06-05 18:17:26,838 p=1077174 u=snelson n=ansible | ansible-playbook 2.9.6
  config file = /home/snelson/sl-infraop/ansible/ansible.cfg
  configured module search path = ['/home/snelson/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]
2021-06-05 18:17:26,838 p=1077174 u=snelson n=ansible | Using /home/snelson/sl-infraop/ansible/ansible.cfg as config file
2021-06-05 18:17:28,528 p=1077174 u=snelson n=ansible | host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:17:28,529 p=1077174 u=snelson n=ansible | script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:17:28,530 p=1077174 u=snelson n=ansible | auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:17:28,533 p=1077174 u=snelson n=ansible | Parsed /etc/ansible/hosts inventory source with ini plugin
2021-06-05 18:17:28,534 p=1077174 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:17:28,812 p=1077174 u=snelson n=ansible | PLAYBOOK: playbook.yml *********************************************************************************************
2021-06-05 18:17:28,812 p=1077174 u=snelson n=ansible | 3 plays in playbook.yml
2021-06-05 18:17:28,815 p=1077174 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:17:28,833 p=1077174 u=snelson n=ansible | META: ran handlers
2021-06-05 18:17:28,839 p=1077174 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:17:28,840 p=1077174 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:5
2021-06-05 18:17:28,976 p=1077174 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:28,976 p=1077174 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:3
2021-06-05 18:17:29,048 p=1077211 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:29,048 p=1077211 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:29,058 p=1077211 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197 `" && echo ansible-tmp-1622917049.046977-126193889376197="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197 `" ) && sleep 0'
2021-06-05 18:17:29,274 p=1077211 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:17:29,276 p=1077211 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077174i5d0ppcs/tmpvmu74dyw TO /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197/AnsiballZ_ec2_key.py
2021-06-05 18:17:29,277 p=1077211 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197/ /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:17:29,286 p=1077211 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-owwhpxfwsqmeheswjmbwwewfpnfunugc ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:17:30,268 p=1077211 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917049.046977-126193889376197/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:30,284 p=1077174 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "absent",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": null,
    "msg": "key deleted"
}
2021-06-05 18:17:30,288 p=1077174 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:30,288 p=1077174 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:13
2021-06-05 18:17:30,370 p=1077238 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:30,370 p=1077238 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:30,382 p=1077238 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447 `" && echo ansible-tmp-1622917050.3695056-153264223106447="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447 `" ) && sleep 0'
2021-06-05 18:17:30,395 p=1077238 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:17:30,396 p=1077238 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077174i5d0ppcs/tmp8ud_xarx TO /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447/AnsiballZ_ec2_key.py
2021-06-05 18:17:30,397 p=1077238 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447/ /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:17:30,407 p=1077238 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-cpfufcgiopjhtizfwjksvqdvevdsjknh ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:17:31,441 p=1077238 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917050.3695056-153264223106447/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:31,460 p=1077174 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": {
        "fingerprint": "f8:ce:fa:f8:1b:b5:aa:f0:65:b8:0b:b2:a0:20:ff:84:cb:f8:cc:96",
        "name": "ec2_keypair",
        "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEogIBAAKCAQEAwMElII29LXmYkQU3OLWFjm4kcP8V/JoII+NIW1jp9RyEqZ/j\nVkeW8VSl3CnC+/3hcGMwH6X2WvNScQH3DaXhKJhRHt58cimnv25WRPHvfBNLmeGR\nj+eKALv4P3Np43Rwjw9XscwkZQMqWUK7Mi0836lh7IugkxSOcHhvM2MuE9UTnZrf\neuP1HRab3hEX2RDs9dGYdlhXbV61nU7bP0Uh4qgX2Ud6X7R0RFgXCHUe0D19eiRG\n6neehvAdruItC1TpVzXGrnvyNwFPfjRr/itRWn5vrRxLHwhJ1hDe0tw93xo5jen3\nwP6M5lDypUCUl3KUFJvDMH/+YEKgiyotTUsKdwIDAQABAoIBAC/85f1gzERSDYWt\nQr4/kuyOx0vKdfLZdkVZBF6ZmEWJwA1q3PJSCGY0qMZTL1QFNOcCCq0WaGrkQRYZ\nYyRms9OjeC6zPVA+xqCGG7w2b2T4eM3qto6ZGmZsZbWGSkpyZsN3EmIVbMopK5Xl\nYy1uzcTxKov1hxiW+Y9OrICipIoTB59nufTFsNXKJooFDvdfgWTILhnz97P2vhpb\nzowByLxaf0XaS2lkIOpehFENRC7zAIFZESFhgs4DI90FtegN3f9M6645L+LP+2vR\n216OzuHRN+V3R0Ky9OWQR/ZXsAZzSFpEfrUWLZHS7qi/7e71zZvIEuCFVUSl+yHH\nevuWQ8ECgYEA3tlD579k4DrCQ1JCa95MGwXafn34vOV/+YpnqxXIqtc9DoVlpVKs\nJGCP2hgfli6w+ffRrcfH2o39vxmWllUcEDefHOep6CqgUmVSvOrKEe6Ws+OJ2dg6\n1oFhe786aeG1F+ee0+l+PRrd3R68mud10C96LuezP8wHhEv7C0Ktpi8CgYEA3W3N\noFyrvef+a++6cowFQ1dOm2lfY63dUk4ed0XJNZ1ZJ9LigLSsRN4UcyuuQfWZEwlr\n2g3fFYF7qPOpjtbMXae7pSVS+pv6FtUEd0ZuyAqP551m0AONIJq1EwQSsnEy8RyF\nXc7DfIr8la/1p71cBtXqr1Mm5zd7kZzYMp/3FjkCgYBzvbgNB1TnON1ohbLFv4Eb\nj+C5TcgAo9nhy0aojvnX8U5e2l2+jb+mbRiJl3ngUIPOcC3Q6jAcjR67QBj8H1wh\n+CGFq7SNRoZaBRIB2Jf21EolSApywGFew3fUA6/dCkM6FSxit6S/K9MLY0ll0s1X\nwTDeZ6yrd9Z3mdbbNFhoNQKBgCLXTCuXaU6QWnARYHz1mz5lVnENu3yrts9ki1ap\nHGfbQlQJ0qn9w71yVDVrAhhO1K8yJE5DMH7pyNNkw6E+GxoBcn0hylS0hj1hdzpt\nUrEXOF1xXuQMKwCeVy+OzIJXXXSi0Dlad1f5ZpUHAthJ61kH/81mgBCRolffHgWZ\nNf/BAoGAOMXeZ5UKSlhNfjjU2Nj56xgUgdX7sfCnw3nNRKcAiIm6KVP/e3MZNDdy\nZLRrSfvr5MI1g8I7sujFeup1f8VqnflYEyP6g9KqBJlp1DfCjb6StU6UxWhUtZL7\nNnhDFhNjqfdvKVK05BufNTEOVgednsgbYK/FM2rWcc5PpWvQbnY=\n-----END RSA PRIVATE KEY-----"
    },
    "msg": "key pair created"
}
2021-06-05 18:17:31,466 p=1077174 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:17:31,466 p=1077174 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:22
2021-06-05 18:17:31,534 p=1077174 u=snelson n=ansible | fatal: [localhost]: FAILED! => {
    "msg": "The conditional check 'ec2_keypair_stat.stat.exists == false or' failed. The error was: template error while templating string: unexpected 'end of statement block'. String: {% if ec2_keypair_stat.stat.exists == false or %} True {% else %} False {% endif %}\n\nThe error appears to be in '/home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml': line 22, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Save EC2 private key\n  ^ here\n"
}
2021-06-05 18:17:31,536 p=1077174 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:17:31,537 p=1077174 u=snelson n=ansible | localhost                  : ok=2    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-06-05 18:17:48,489 p=1077390 u=snelson n=ansible | ansible-playbook 2.9.6
  config file = /home/snelson/sl-infraop/ansible/ansible.cfg
  configured module search path = ['/home/snelson/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3/dist-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.8.5 (default, May 27 2021, 13:30:53) [GCC 9.3.0]
2021-06-05 18:17:48,490 p=1077390 u=snelson n=ansible | Using /home/snelson/sl-infraop/ansible/ansible.cfg as config file
2021-06-05 18:17:50,329 p=1077390 u=snelson n=ansible | host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:17:50,331 p=1077390 u=snelson n=ansible | script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:17:50,332 p=1077390 u=snelson n=ansible | auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
2021-06-05 18:17:50,335 p=1077390 u=snelson n=ansible | Parsed /etc/ansible/hosts inventory source with ini plugin
2021-06-05 18:17:50,336 p=1077390 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:17:50,634 p=1077390 u=snelson n=ansible | PLAYBOOK: playbook.yml *********************************************************************************************
2021-06-05 18:17:50,635 p=1077390 u=snelson n=ansible | 3 plays in playbook.yml
2021-06-05 18:17:50,638 p=1077390 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:17:50,665 p=1077390 u=snelson n=ansible | META: ran handlers
2021-06-05 18:17:50,671 p=1077390 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:17:50,671 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:5
2021-06-05 18:17:50,799 p=1077390 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:50,799 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:3
2021-06-05 18:17:50,859 p=1077415 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:50,859 p=1077415 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:50,870 p=1077415 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092 `" && echo ansible-tmp-1622917070.85791-64777553325092="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092 `" ) && sleep 0'
2021-06-05 18:17:51,077 p=1077415 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:17:51,078 p=1077415 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpds2agwnp TO /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092/AnsiballZ_ec2_key.py
2021-06-05 18:17:51,080 p=1077415 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092/ /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:17:51,092 p=1077415 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-dxzifkqodzdqrpskanpdhhbgbnnrojev ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:17:52,064 p=1077415 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917070.85791-64777553325092/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:52,081 p=1077390 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "absent",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": null,
    "msg": "key deleted"
}
2021-06-05 18:17:52,085 p=1077390 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:52,087 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:13
2021-06-05 18:17:52,148 p=1077458 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:52,149 p=1077458 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:52,159 p=1077458 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526 `" && echo ansible-tmp-1622917072.147879-191780614348526="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526 `" ) && sleep 0'
2021-06-05 18:17:52,172 p=1077458 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_key.py
2021-06-05 18:17:52,173 p=1077458 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpimgm21tv TO /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526/AnsiballZ_ec2_key.py
2021-06-05 18:17:52,175 p=1077458 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526/ /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526/AnsiballZ_ec2_key.py && sleep 0'
2021-06-05 18:17:52,185 p=1077458 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-pvzezslocgbtwwknkfcraywbrkqvsijw ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526/AnsiballZ_ec2_key.py'"'"' && sleep 0'
2021-06-05 18:17:53,205 p=1077458 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917072.147879-191780614348526/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:53,220 p=1077390 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "force": true,
            "key_material": null,
            "name": "ec2_keypair",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 300
        }
    },
    "key": {
        "fingerprint": "7f:04:d2:2a:7a:d1:cf:ba:69:00:b9:ae:be:81:bd:3d:7b:53:61:09",
        "name": "ec2_keypair",
        "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAxljQuYh0pb87Gst+m528U95qy9ISo+DItu4ZHdTxPjgzYrpe\n4u1Os+F7yN289iuB3v0OuOtsu77kdVro8A5B6WfU8tZvBDbkIHujXbfzCGXJ3sYF\nzXb4O+eR/0hSb6NelauMSuPromLlDEQIxUwj5ONXmN4ZW3u/p4URLeMXQwtflyNw\nHPrMezHkAv26JiPy210fuF3GnuJdoyTGsG6lGGF7ZftI7qM0LkKCJG+2DBPtuGsh\nLzjq9Gzx688O+aCtwkHwKR7Q7j/W9Ut4xiHu5tioyKaYq6Xi8RO+viICOOcOjNyR\n7JN1BQD0npTcW8a/D274enN7ag5+9qdRLzkOZwIDAQABAoIBAQCME/V00lXvKJrJ\nVaXYqRFz+cRapcXcTsfxyT2bv+OQGYjQ1OZmRUor57bQKSlmgVt67CUVm85y2WHn\nL4kK4EbUXCwcRCyrQUjjV+4MJflRmPF0j01Ryg+N3wFQ1PbDORF3imvOCCFF0aoJ\ne5LmI9vFrnkS0Of/n+m+mU+EpLis84BcgXfwxagnjW2/a3q42RqZ1tggkiqEm8pn\nxs7+E9VQRV6/WdgzcEit+HkjKvZGgLx0pAF2wGprawa3SmdFOCBEag/5QlnVYGPO\nyUY7UAEfU6nCHQ6++8xr4oCNUNgM4qMu1ZQQXzw3/FVUVMMWARt4DV48v/GKKaaI\n3E8+c8HBAoGBAPCMy4FWPG4/UTN8hVN8WiQ4ushcmdiodrBa4wcjR6PxAVBhh52W\nw6bDK5me9XViOoRRIgwFq+HLXcdREf6z2ZzngL4hM26Y14u6t4MLnSjbpIiGbOv1\ndGxeE+8VEVQd4kP6AX7ACm5pw43DHrDytTzGgZE/NQ0BjPAGTSXwYXV/AoGBANMW\nGn27JERz0jw2mErZ6Nm/XZcaCycSdh//v7VkNPI4JzQVmEmXUq++IzyHfYTdUNgm\nZHX8KePywh4uDtIa/hpSGi1YJr+iGZdc7lT4aPYDTQgterFyMPUmIbQBjfZalsn9\ngz9jvTxfaapJ0/rPagrJBbSFnRahK7wDpqbnp+sZAoGAOy24JyKLDWhgVrVMq6RN\nHNokAYTeiHGxeWNytN/WERwKgbbswTVE/vLG+C0mH/HBianYIXMHvS3l7VIhhjLC\n15oQjzXlzFCnvoV5/jBOQq3+hWPkygwBz2M5rjjVoYcUkjqgQYmHR3CXnnmhRFEB\ni2kemRgeugtmm+pA8pN3tosCgYEAy/spIGUO+ANAnyVW58ZKKNmvdEwbiOdjNSrs\ntDognA09fSx9HGhZ5DCGVoDL/+/qpuX64LUMOhYmFgoGEm05LnA2kakE0NyxhD6u\npXfj3hB0iTmBviYOP2hY211BNVZ3LryH72LPxJ6jOobbjRyQadm2ZKtVkT+wRqD0\nk4d7EkkCgYEAtncqTQhFyuAyTdBdS2Bn+18XY52Gmb5uXWhSxIfP3ZIsnXL0w1Jc\nGitUp0mKLo5b3qu2CkdPHAHK9q9EMWR1tPpZf5XwoUylJSqZjkXCt7nnNXszJ6Xp\ntV+96NC26owKF+tW+8NLHzaV4vzYb0YaWjJpCL7VwGAzkXVc++YjCfU=\n-----END RSA PRIVATE KEY-----"
    },
    "msg": "key pair created"
}
2021-06-05 18:17:53,225 p=1077390 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:17:53,225 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:22
2021-06-05 18:17:53,287 p=1077485 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:53,287 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:53,296 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188 `" && echo ansible-tmp-1622917073.286235-248089432021188="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188 `" ) && sleep 0'
2021-06-05 18:17:53,434 p=1077485 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/stat.py
2021-06-05 18:17:53,435 p=1077485 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmp9aadqjha TO /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/AnsiballZ_stat.py
2021-06-05 18:17:53,436 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/ /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:17:53,450 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/AnsiballZ_stat.py && sleep 0'
2021-06-05 18:17:53,672 p=1077485 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpffh2mqz0 TO /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/source
2021-06-05 18:17:53,673 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/ /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/source && sleep 0'
2021-06-05 18:17:53,866 p=1077485 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/files/copy.py
2021-06-05 18:17:53,866 p=1077485 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpznb77zdk TO /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/AnsiballZ_copy.py
2021-06-05 18:17:53,868 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/ /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/AnsiballZ_copy.py && sleep 0'
2021-06-05 18:17:53,880 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/AnsiballZ_copy.py && sleep 0'
2021-06-05 18:17:54,093 p=1077485 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:54,108 p=1077390 u=snelson n=ansible | changed: [localhost] => {
    "changed": true,
    "checksum": "22cf18519decd69da5c72245c319879aa01a45da",
    "dest": "./ec2_keypair.pem",
    "diff": [],
    "gid": 1002,
    "group": "snelson",
    "invocation": {
        "module_args": {
            "_original_basename": "tmpffh2mqz0",
            "attributes": null,
            "backup": false,
            "checksum": "22cf18519decd69da5c72245c319879aa01a45da",
            "content": null,
            "delimiter": null,
            "dest": "./ec2_keypair.pem",
            "directory_mode": null,
            "follow": false,
            "force": true,
            "group": null,
            "local_follow": null,
            "mode": 384,
            "owner": null,
            "regexp": null,
            "remote_src": null,
            "selevel": null,
            "serole": null,
            "setype": null,
            "seuser": null,
            "src": "/home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/source",
            "unsafe_writes": null,
            "validate": null
        }
    },
    "md5sum": "386909427669e9d13e2f56298b4e2f07",
    "mode": "0600",
    "owner": "snelson",
    "size": 1678,
    "src": "/home/snelson/.ansible/tmp/ansible-tmp-1622917073.286235-248089432021188/source",
    "state": "file",
    "uid": 1001
}
2021-06-05 18:17:54,113 p=1077390 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:54,113 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:29
2021-06-05 18:17:54,176 p=1077525 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:54,177 p=1077525 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:54,186 p=1077525 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251 `" && echo ansible-tmp-1622917074.1756644-172120149635251="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251 `" ) && sleep 0'
2021-06-05 18:17:54,416 p=1077525 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2021-06-05 18:17:54,416 p=1077525 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpkinr_b4y TO /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251/AnsiballZ_ec2_vpc_net.py
2021-06-05 18:17:54,417 p=1077525 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251/ /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251/AnsiballZ_ec2_vpc_net.py && sleep 0'
2021-06-05 18:17:54,428 p=1077525 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-xfgqyfantptbzomgrniuuxrdbrchamjb ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251/AnsiballZ_ec2_vpc_net.py'"'"' && sleep 0'
2021-06-05 18:17:56,228 p=1077525 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917074.1756644-172120149635251/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:56,248 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "cidr_block": [
                "10.10.0.0/24"
            ],
            "debug_botocore_endpoint_logs": false,
            "dhcp_opts_id": null,
            "dns_hostnames": true,
            "dns_support": true,
            "ec2_url": null,
            "multi_ok": false,
            "name": "Cluster VPC",
            "profile": null,
            "purge_cidrs": false,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "tags": null,
            "tenancy": "default",
            "validate_certs": true
        }
    },
    "vpc": {
        "cidr_block": "10.10.0.0/24",
        "cidr_block_association_set": [
            {
                "association_id": "vpc-cidr-assoc-0574b492009ebda9d",
                "cidr_block": "10.10.0.0/24",
                "cidr_block_state": {
                    "state": "associated"
                }
            }
        ],
        "classic_link_enabled": false,
        "dhcp_options_id": "dopt-3fff6b45",
        "id": "vpc-0e95d69879de5821e",
        "instance_tenancy": "default",
        "is_default": false,
        "owner_id": "992833567489",
        "state": "available",
        "tags": {
            "Name": "Cluster VPC"
        }
    }
}
2021-06-05 18:17:56,252 p=1077390 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:17:56,253 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:40
2021-06-05 18:17:56,310 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0e95d69879de5821e"
    },
    "changed": false
}
2021-06-05 18:17:56,315 p=1077390 u=snelson n=ansible | TASK [ec2 : Associate subnet to the VPC state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, cidr={{ subnet_cidr }}, map_public=True, resource_tags={'Name': '{{ subnet_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:56,315 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:45
2021-06-05 18:17:56,379 p=1077571 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:56,380 p=1077571 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:56,391 p=1077571 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693 `" && echo ansible-tmp-1622917076.377268-77976047879693="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693 `" ) && sleep 0'
2021-06-05 18:17:56,622 p=1077571 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2021-06-05 18:17:56,623 p=1077571 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmp96lzd9aa TO /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693/AnsiballZ_ec2_vpc_subnet.py
2021-06-05 18:17:56,623 p=1077571 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693/ /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2021-06-05 18:17:56,634 p=1077571 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-jttccqjxogvccwglxhmyandionwhutfy ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693/AnsiballZ_ec2_vpc_subnet.py'"'"' && sleep 0'
2021-06-05 18:17:57,729 p=1077571 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917076.377268-77976047879693/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:57,744 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false,
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "az": null,
            "cidr": "10.10.0.0/26",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "ipv6_cidr": "",
            "map_public": true,
            "profile": null,
            "purge_tags": true,
            "region": "us-east-1",
            "resource_tags": {
                "Name": "Cluster Subnet"
            },
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "tags": {
                "Name": "Cluster Subnet"
            },
            "validate_certs": true,
            "vpc_id": "vpc-0e95d69879de5821e",
            "wait": true,
            "wait_timeout": 300
        }
    },
    "subnet": {
        "assign_ipv6_address_on_creation": false,
        "availability_zone": "us-east-1f",
        "availability_zone_id": "use1-az5",
        "available_ip_address_count": 54,
        "cidr_block": "10.10.0.0/26",
        "default_for_az": false,
        "id": "subnet-0031ca01b5f194230",
        "ipv6_association_id": "",
        "ipv6_cidr_block": "",
        "ipv6_cidr_block_association_set": [],
        "map_customer_owned_ip_on_launch": false,
        "map_public_ip_on_launch": true,
        "owner_id": "992833567489",
        "state": "available",
        "subnet_arn": "arn:aws:ec2:us-east-1:992833567489:subnet/subnet-0031ca01b5f194230",
        "tags": {
            "Name": "Cluster Subnet"
        },
        "vpc_id": "vpc-0e95d69879de5821e"
    }
}
2021-06-05 18:17:57,749 p=1077390 u=snelson n=ansible | TASK [ec2 : Set vpc_subnet_id vpc_subnet_id={{ create_subnet.subnet.id }}] *****************************************
2021-06-05 18:17:57,749 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:59
2021-06-05 18:17:57,806 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "ansible_facts": {
        "vpc_subnet_id": "subnet-0031ca01b5f194230"
    },
    "changed": false
}
2021-06-05 18:17:57,811 p=1077390 u=snelson n=ansible | TASK [ec2 : Create IGW state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, tags={'Name': '{{ igw_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:57,811 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:63
2021-06-05 18:17:57,870 p=1077615 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:57,871 p=1077615 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:57,880 p=1077615 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883 `" && echo ansible-tmp-1622917077.8697426-264526815442883="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883 `" ) && sleep 0'
2021-06-05 18:17:58,105 p=1077615 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
2021-06-05 18:17:58,106 p=1077615 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmphggjou8k TO /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883/AnsiballZ_ec2_vpc_igw.py
2021-06-05 18:17:58,107 p=1077615 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883/ /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2021-06-05 18:17:58,117 p=1077615 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-ornzepovyumhsiiemegqvqehnnmjmjbh ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883/AnsiballZ_ec2_vpc_igw.py'"'"' && sleep 0'
2021-06-05 18:17:59,026 p=1077615 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917077.8697426-264526815442883/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:17:59,049 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "gateway_id": "igw-0c789d016be8dbbb1",
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "tags": {
                "Name": "Cluster IGW"
            },
            "validate_certs": true,
            "vpc_id": "vpc-0e95d69879de5821e"
        }
    },
    "tags": {
        "Name": "Cluster IGW"
    },
    "vpc_id": "vpc-0e95d69879de5821e"
}
2021-06-05 18:17:59,054 p=1077390 u=snelson n=ansible | TASK [ec2 : Route IGW vpc_id={{ vpc_id }}, region={{ region_name }}, subnets=['{{ vpc_subnet_id }}'], routes=[{'dest': '0.0.0.0/0', 'gateway_id': '{{ igw.gateway_id }}'}], tags={'Name': 'Route IGW'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:17:59,055 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:75
2021-06-05 18:17:59,137 p=1077642 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:17:59,138 p=1077642 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:17:59,155 p=1077642 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772 `" && echo ansible-tmp-1622917079.1359363-119846899192772="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772 `" ) && sleep 0'
2021-06-05 18:17:59,370 p=1077642 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
2021-06-05 18:17:59,371 p=1077642 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmp25pfh4ke TO /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772/AnsiballZ_ec2_vpc_route_table.py
2021-06-05 18:17:59,372 p=1077642 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772/ /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2021-06-05 18:17:59,388 p=1077642 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-lzgmijgbjwdvamemhhjsxvigpowftglp ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772/AnsiballZ_ec2_vpc_route_table.py'"'"' && sleep 0'
2021-06-05 18:18:00,667 p=1077642 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917079.1359363-119846899192772/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:00,691 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "lookup": "tag",
            "profile": null,
            "propagating_vgw_ids": null,
            "purge_routes": true,
            "purge_subnets": true,
            "purge_tags": false,
            "region": "us-east-1",
            "route_table_id": null,
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0",
                    "gateway_id": "igw-0c789d016be8dbbb1"
                }
            ],
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "subnets": [
                "subnet-0031ca01b5f194230"
            ],
            "tags": {
                "Name": "Route IGW"
            },
            "validate_certs": true,
            "vpc_id": "vpc-0e95d69879de5821e"
        }
    },
    "route_table": {
        "associations": [
            {
                "association_state": {
                    "state": "associated"
                },
                "main": false,
                "route_table_association_id": "rtbassoc-0d2bb0cd150efbef2",
                "route_table_id": "rtb-0f48de941e371bd9a",
                "subnet_id": "subnet-0031ca01b5f194230"
            }
        ],
        "id": "rtb-0f48de941e371bd9a",
        "owner_id": "992833567489",
        "propagating_vgws": [],
        "route_table_id": "rtb-0f48de941e371bd9a",
        "routes": [
            {
                "destination_cidr_block": "10.10.0.0/24",
                "gateway_id": "local",
                "origin": "CreateRouteTable",
                "state": "active"
            },
            {
                "destination_cidr_block": "0.0.0.0/0",
                "gateway_id": "igw-0c789d016be8dbbb1",
                "origin": "CreateRoute",
                "state": "active"
            }
        ],
        "tags": {
            "Name": "Route IGW"
        },
        "vpc_id": "vpc-0e95d69879de5821e"
    }
}
2021-06-05 18:18:00,694 p=1077390 u=snelson n=ansible | TASK [ec2 : Create EC2 Security Group name={{ sg_name }}, description=DMZ Security Group, vpc_id={{ vpc_id }}, region={{ region_name }}, state=present, rules=[{'proto': 'tcp', 'from_port': 80, 'to_port': 80, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 6443, 'to_port': 6443, 'cidr_ip': '0.0.0.0/0'}], aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:18:00,695 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:90
2021-06-05 18:18:00,756 p=1077691 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:18:00,757 p=1077691 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:00,788 p=1077691 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898 `" && echo ansible-tmp-1622917080.755346-84170830246898="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898 `" ) && sleep 0'
2021-06-05 18:18:01,066 p=1077691 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_group.py
2021-06-05 18:18:01,067 p=1077691 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpd5t9f0hw TO /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898/AnsiballZ_ec2_group.py
2021-06-05 18:18:01,068 p=1077691 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898/ /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898/AnsiballZ_ec2_group.py && sleep 0'
2021-06-05 18:18:01,081 p=1077691 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-sgbzuoczrdehusjyqlnnrrhueslgpgic ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898/AnsiballZ_ec2_group.py'"'"' && sleep 0'
2021-06-05 18:18:02,459 p=1077691 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917080.755346-84170830246898/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:02,477 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "description": "DMZ Security Group",
    "group_id": "sg-0ce48435c25d3fbd1",
    "group_name": "Cluster Web DMZ",
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "description": "DMZ Security Group",
            "ec2_url": null,
            "group_id": null,
            "name": "Cluster Web DMZ",
            "profile": null,
            "purge_rules": true,
            "purge_rules_egress": true,
            "purge_tags": true,
            "region": "us-east-1",
            "rules": [
                {
                    "cidr_ip": "0.0.0.0/0",
                    "from_port": 80,
                    "proto": "tcp",
                    "to_port": 80
                },
                {
                    "cidr_ip": "0.0.0.0/0",
                    "from_port": 22,
                    "proto": "tcp",
                    "to_port": 22
                },
                {
                    "cidr_ip": "0.0.0.0/0",
                    "from_port": 6443,
                    "proto": "tcp",
                    "to_port": 6443
                }
            ],
            "rules_egress": null,
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "tags": null,
            "validate_certs": true,
            "vpc_id": "vpc-0e95d69879de5821e"
        }
    },
    "ip_permissions": [
        {
            "from_port": 80,
            "ip_protocol": "tcp",
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ],
            "ipv6_ranges": [],
            "prefix_list_ids": [],
            "to_port": 80,
            "user_id_group_pairs": []
        },
        {
            "from_port": 6443,
            "ip_protocol": "tcp",
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ],
            "ipv6_ranges": [],
            "prefix_list_ids": [],
            "to_port": 6443,
            "user_id_group_pairs": []
        },
        {
            "from_port": 22,
            "ip_protocol": "tcp",
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ],
            "ipv6_ranges": [],
            "prefix_list_ids": [],
            "to_port": 22,
            "user_id_group_pairs": []
        }
    ],
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1",
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ],
            "ipv6_ranges": [],
            "prefix_list_ids": [],
            "user_id_group_pairs": []
        }
    ],
    "owner_id": "992833567489",
    "tags": {},
    "vpc_id": "vpc-0e95d69879de5821e"
}
2021-06-05 18:18:02,481 p=1077390 u=snelson n=ansible | TASK [ec2 : Set Security Group Id sg_id={{ security_group.group_id }}] *********************************************
2021-06-05 18:18:02,481 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:115
2021-06-05 18:18:02,538 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "ansible_facts": {
        "sg_id": "sg-0ce48435c25d3fbd1"
    },
    "changed": false
}
2021-06-05 18:18:02,545 p=1077390 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Master key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'master'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'master'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:18:02,545 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:119
2021-06-05 18:18:02,622 p=1077736 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:18:02,622 p=1077736 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:02,635 p=1077736 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098 `" && echo ansible-tmp-1622917082.621408-180143006427098="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098 `" ) && sleep 0'
2021-06-05 18:18:02,908 p=1077736 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2.py
2021-06-05 18:18:02,909 p=1077736 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmp0hijdoo6 TO /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098/AnsiballZ_ec2.py
2021-06-05 18:18:02,910 p=1077736 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098/ /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098/AnsiballZ_ec2.py && sleep 0'
2021-06-05 18:18:02,921 p=1077736 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-kkkomlqdnsfvgcmbvvjdmrebvefnpdcx ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098/AnsiballZ_ec2.py'"'"' && sleep 0'
2021-06-05 18:18:03,904 p=1077736 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917082.621408-180143006427098/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:03,920 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "changed": false,
    "instance_ids": null,
    "instances": [],
    "invocation": {
        "module_args": {
            "assign_public_ip": null,
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "count": 1,
            "count_tag": {
                "Name": "master"
            },
            "debug_botocore_endpoint_logs": false,
            "ebs_optimized": false,
            "ec2_url": null,
            "exact_count": 1,
            "group": [
                "Cluster Web DMZ"
            ],
            "group_id": null,
            "id": null,
            "image": "ami-0d5eff06f840b45e9",
            "instance_ids": null,
            "instance_initiated_shutdown_behavior": "stop",
            "instance_profile_name": null,
            "instance_tags": {
                "Name": "master"
            },
            "instance_type": "t2.micro",
            "kernel": null,
            "key_name": "ec2_keypair",
            "monitoring": false,
            "network_interfaces": null,
            "placement_group": null,
            "private_ip": null,
            "profile": null,
            "ramdisk": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "source_dest_check": null,
            "spot_launch_group": null,
            "spot_price": null,
            "spot_type": "one-time",
            "spot_wait_timeout": 600,
            "state": "present",
            "tenancy": "default",
            "termination_protection": null,
            "user_data": null,
            "validate_certs": true,
            "volumes": null,
            "vpc_subnet_id": "subnet-0031ca01b5f194230",
            "wait": true,
            "wait_timeout": 300,
            "zone": null
        }
    },
    "tagged_instances": [
        {
            "ami_launch_index": "0",
            "architecture": "x86_64",
            "block_device_mapping": {
                "/dev/xvda": {
                    "delete_on_termination": true,
                    "status": "attached",
                    "volume_id": "vol-055d6e89836ffcbdc"
                }
            },
            "dns_name": "ec2-34-196-213-250.compute-1.amazonaws.com",
            "ebs_optimized": false,
            "groups": {
                "sg-0ce48435c25d3fbd1": "Cluster Web DMZ"
            },
            "hypervisor": "xen",
            "id": "i-02e3202373f956f30",
            "image_id": "ami-0d5eff06f840b45e9",
            "instance_type": "t2.micro",
            "kernel": null,
            "key_name": "ec2_keypair",
            "launch_time": "2021-06-05T17:35:33.000Z",
            "placement": "us-east-1f",
            "private_dns_name": "ip-10-10-0-55.ec2.internal",
            "private_ip": "10.10.0.55",
            "public_dns_name": "ec2-34-196-213-250.compute-1.amazonaws.com",
            "public_ip": "34.196.213.250",
            "ramdisk": null,
            "region": "us-east-1",
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "state": "running",
            "state_code": 16,
            "tags": {
                "Name": "master"
            },
            "tenancy": "default",
            "virtualization_type": "hvm"
        }
    ]
}
2021-06-05 18:18:03,925 p=1077390 u=snelson n=ansible | TASK [ec2 : Allocate Master Elastic IP state=present, device_id={{ master.tagged_instances[0].id }}, region={{ region_name }}, in_vpc=True, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:18:03,926 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:138
2021-06-05 18:18:03,985 p=1077763 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:18:03,986 p=1077763 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:03,996 p=1077763 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940 `" && echo ansible-tmp-1622917083.9851758-19985556996940="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940 `" ) && sleep 0'
2021-06-05 18:18:04,200 p=1077763 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_eip.py
2021-06-05 18:18:04,200 p=1077763 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpf9ux7hwp TO /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940/AnsiballZ_ec2_eip.py
2021-06-05 18:18:04,201 p=1077763 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940/ /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940/AnsiballZ_ec2_eip.py && sleep 0'
2021-06-05 18:18:04,212 p=1077763 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-vlwokfboewyfvusvpqppjmfprboqaomr ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940/AnsiballZ_ec2_eip.py'"'"' && sleep 0'
2021-06-05 18:18:05,309 p=1077763 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917083.9851758-19985556996940/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:05,326 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "allocation_id": "eipalloc-08ba0cab88e75c0ac",
    "changed": false,
    "invocation": {
        "module_args": {
            "allow_reassociation": false,
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "device_id": "i-02e3202373f956f30",
            "ec2_url": null,
            "in_vpc": true,
            "private_ip_address": null,
            "profile": null,
            "public_ip": null,
            "public_ipv4_pool": null,
            "region": "us-east-1",
            "release_on_disassociation": false,
            "reuse_existing_ip_allowed": false,
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "tag_name": null,
            "tag_value": null,
            "validate_certs": true,
            "wait_timeout": 300
        }
    },
    "public_ip": "34.196.213.250"
}
2021-06-05 18:18:05,330 p=1077390 u=snelson n=ansible | TASK [ec2 : Add master to master group hostname={{ eip.public_ip }}, groupname=master] *****************************
2021-06-05 18:18:05,330 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:150
2021-06-05 18:18:05,398 p=1077799 u=snelson n=ansible | creating host via 'add_host': hostname=34.196.213.250
2021-06-05 18:18:05,404 p=1077390 u=snelson n=ansible | changed: [localhost] => {
    "add_host": {
        "groups": [
            "master"
        ],
        "host_name": "34.196.213.250",
        "host_vars": {}
    },
    "changed": true
}
2021-06-05 18:18:05,408 p=1077390 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Worker Nodes key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'worker-{{ item }}'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'worker-{{ item }}'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:18:05,409 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:156
2021-06-05 18:18:05,475 p=1077809 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:18:05,476 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:05,485 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801 `" && echo ansible-tmp-1622917085.4752371-257137274379801="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801 `" ) && sleep 0'
2021-06-05 18:18:05,497 p=1077809 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2.py
2021-06-05 18:18:05,498 p=1077809 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmprntlobjh TO /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801/AnsiballZ_ec2.py
2021-06-05 18:18:05,499 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801/ /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801/AnsiballZ_ec2.py && sleep 0'
2021-06-05 18:18:05,509 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-ybldzexkutvvwjplrghptdldopuqveln ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801/AnsiballZ_ec2.py'"'"' && sleep 0'
2021-06-05 18:18:06,485 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917085.4752371-257137274379801/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:06,509 p=1077390 u=snelson n=ansible | ok: [localhost] => (item=1) => {
    "ansible_loop_var": "item",
    "changed": false,
    "instance_ids": null,
    "instances": [],
    "invocation": {
        "module_args": {
            "assign_public_ip": null,
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "count": 1,
            "count_tag": {
                "Name": "worker-1"
            },
            "debug_botocore_endpoint_logs": false,
            "ebs_optimized": false,
            "ec2_url": null,
            "exact_count": 1,
            "group": [
                "Cluster Web DMZ"
            ],
            "group_id": null,
            "id": null,
            "image": "ami-0d5eff06f840b45e9",
            "instance_ids": null,
            "instance_initiated_shutdown_behavior": "stop",
            "instance_profile_name": null,
            "instance_tags": {
                "Name": "worker-1"
            },
            "instance_type": "t2.micro",
            "kernel": null,
            "key_name": "ec2_keypair",
            "monitoring": false,
            "network_interfaces": null,
            "placement_group": null,
            "private_ip": null,
            "profile": null,
            "ramdisk": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "source_dest_check": null,
            "spot_launch_group": null,
            "spot_price": null,
            "spot_type": "one-time",
            "spot_wait_timeout": 600,
            "state": "present",
            "tenancy": "default",
            "termination_protection": null,
            "user_data": null,
            "validate_certs": true,
            "volumes": null,
            "vpc_subnet_id": "subnet-0031ca01b5f194230",
            "wait": true,
            "wait_timeout": 300,
            "zone": null
        }
    },
    "item": "1",
    "tagged_instances": [
        {
            "ami_launch_index": "0",
            "architecture": "x86_64",
            "block_device_mapping": {
                "/dev/xvda": {
                    "delete_on_termination": true,
                    "status": "attached",
                    "volume_id": "vol-0e7c780e0ee880a16"
                }
            },
            "dns_name": "ec2-18-232-119-237.compute-1.amazonaws.com",
            "ebs_optimized": false,
            "groups": {
                "sg-0ce48435c25d3fbd1": "Cluster Web DMZ"
            },
            "hypervisor": "xen",
            "id": "i-0b2bdcdda2d5def65",
            "image_id": "ami-0d5eff06f840b45e9",
            "instance_type": "t2.micro",
            "kernel": null,
            "key_name": "ec2_keypair",
            "launch_time": "2021-06-05T17:36:05.000Z",
            "placement": "us-east-1f",
            "private_dns_name": "ip-10-10-0-21.ec2.internal",
            "private_ip": "10.10.0.21",
            "public_dns_name": "ec2-18-232-119-237.compute-1.amazonaws.com",
            "public_ip": "18.232.119.237",
            "ramdisk": null,
            "region": "us-east-1",
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "state": "running",
            "state_code": 16,
            "tags": {
                "Name": "worker-1"
            },
            "tenancy": "default",
            "virtualization_type": "hvm"
        }
    ]
}
2021-06-05 18:18:06,514 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:06,524 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104 `" && echo ansible-tmp-1622917086.5134614-114966617672104="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104 `" ) && sleep 0'
2021-06-05 18:18:06,537 p=1077809 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2.py
2021-06-05 18:18:06,538 p=1077809 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpaedvot1c TO /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104/AnsiballZ_ec2.py
2021-06-05 18:18:06,539 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104/ /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104/AnsiballZ_ec2.py && sleep 0'
2021-06-05 18:18:06,549 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-tdgudykrghvdpibyltomrttyhldpbivr ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104/AnsiballZ_ec2.py'"'"' && sleep 0'
2021-06-05 18:18:07,463 p=1077809 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917086.5134614-114966617672104/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:07,483 p=1077390 u=snelson n=ansible | ok: [localhost] => (item=2) => {
    "ansible_loop_var": "item",
    "changed": false,
    "instance_ids": null,
    "instances": [],
    "invocation": {
        "module_args": {
            "assign_public_ip": null,
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "count": 1,
            "count_tag": {
                "Name": "worker-2"
            },
            "debug_botocore_endpoint_logs": false,
            "ebs_optimized": false,
            "ec2_url": null,
            "exact_count": 1,
            "group": [
                "Cluster Web DMZ"
            ],
            "group_id": null,
            "id": null,
            "image": "ami-0d5eff06f840b45e9",
            "instance_ids": null,
            "instance_initiated_shutdown_behavior": "stop",
            "instance_profile_name": null,
            "instance_tags": {
                "Name": "worker-2"
            },
            "instance_type": "t2.micro",
            "kernel": null,
            "key_name": "ec2_keypair",
            "monitoring": false,
            "network_interfaces": null,
            "placement_group": null,
            "private_ip": null,
            "profile": null,
            "ramdisk": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "source_dest_check": null,
            "spot_launch_group": null,
            "spot_price": null,
            "spot_type": "one-time",
            "spot_wait_timeout": 600,
            "state": "present",
            "tenancy": "default",
            "termination_protection": null,
            "user_data": null,
            "validate_certs": true,
            "volumes": null,
            "vpc_subnet_id": "subnet-0031ca01b5f194230",
            "wait": true,
            "wait_timeout": 300,
            "zone": null
        }
    },
    "item": "2",
    "tagged_instances": [
        {
            "ami_launch_index": "0",
            "architecture": "x86_64",
            "block_device_mapping": {
                "/dev/xvda": {
                    "delete_on_termination": true,
                    "status": "attached",
                    "volume_id": "vol-0e95fe06c8a74ac3e"
                }
            },
            "dns_name": "ec2-3-234-211-126.compute-1.amazonaws.com",
            "ebs_optimized": false,
            "groups": {
                "sg-0ce48435c25d3fbd1": "Cluster Web DMZ"
            },
            "hypervisor": "xen",
            "id": "i-07203e6087ff0fb5e",
            "image_id": "ami-0d5eff06f840b45e9",
            "instance_type": "t2.micro",
            "kernel": null,
            "key_name": "ec2_keypair",
            "launch_time": "2021-06-05T17:36:55.000Z",
            "placement": "us-east-1f",
            "private_dns_name": "ip-10-10-0-25.ec2.internal",
            "private_ip": "10.10.0.25",
            "public_dns_name": "ec2-3-234-211-126.compute-1.amazonaws.com",
            "public_ip": "3.234.211.126",
            "ramdisk": null,
            "region": "us-east-1",
            "root_device_name": "/dev/xvda",
            "root_device_type": "ebs",
            "state": "running",
            "state_code": 16,
            "tags": {
                "Name": "worker-2"
            },
            "tenancy": "default",
            "virtualization_type": "hvm"
        }
    ]
}
2021-06-05 18:18:07,488 p=1077390 u=snelson n=ansible | TASK [ec2 : Add Cluster Worker Nodes to Worker Group groupname=workers, hostname={{ item.tagged_instances[0].public_ip }}] ***
2021-06-05 18:18:07,488 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:177
2021-06-05 18:18:07,555 p=1077880 u=snelson n=ansible | creating host via 'add_host': hostname=18.232.119.237
2021-06-05 18:18:07,564 p=1077390 u=snelson n=ansible | changed: [localhost] => (item={'changed': False, 'instance_ids': None, 'instances': [], 'tagged_instances': [{'id': 'i-0b2bdcdda2d5def65', 'ami_launch_index': '0', 'private_ip': '10.10.0.21', 'private_dns_name': 'ip-10-10-0-21.ec2.internal', 'public_ip': '18.232.119.237', 'dns_name': 'ec2-18-232-119-237.compute-1.amazonaws.com', 'public_dns_name': 'ec2-18-232-119-237.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T17:36:05.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-0ce48435c25d3fbd1': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-0e7c780e0ee880a16', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-1'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-1'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '1', 'ansible_loop_var': 'item'}) => {
    "add_host": {
        "groups": [
            "workers"
        ],
        "host_name": "18.232.119.237",
        "host_vars": {}
    },
    "ansible_loop_var": "item",
    "changed": true,
    "item": {
        "ansible_loop_var": "item",
        "changed": false,
        "failed": false,
        "instance_ids": null,
        "instances": [],
        "invocation": {
            "module_args": {
                "assign_public_ip": null,
                "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
                "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
                "count": 1,
                "count_tag": {
                    "Name": "worker-1"
                },
                "debug_botocore_endpoint_logs": false,
                "ebs_optimized": false,
                "ec2_url": null,
                "exact_count": 1,
                "group": [
                    "Cluster Web DMZ"
                ],
                "group_id": null,
                "id": null,
                "image": "ami-0d5eff06f840b45e9",
                "instance_ids": null,
                "instance_initiated_shutdown_behavior": "stop",
                "instance_profile_name": null,
                "instance_tags": {
                    "Name": "worker-1"
                },
                "instance_type": "t2.micro",
                "kernel": null,
                "key_name": "ec2_keypair",
                "monitoring": false,
                "network_interfaces": null,
                "placement_group": null,
                "private_ip": null,
                "profile": null,
                "ramdisk": null,
                "region": "us-east-1",
                "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
                "source_dest_check": null,
                "spot_launch_group": null,
                "spot_price": null,
                "spot_type": "one-time",
                "spot_wait_timeout": 600,
                "state": "present",
                "tenancy": "default",
                "termination_protection": null,
                "user_data": null,
                "validate_certs": true,
                "volumes": null,
                "vpc_subnet_id": "subnet-0031ca01b5f194230",
                "wait": true,
                "wait_timeout": 300,
                "zone": null
            }
        },
        "item": "1",
        "tagged_instances": [
            {
                "ami_launch_index": "0",
                "architecture": "x86_64",
                "block_device_mapping": {
                    "/dev/xvda": {
                        "delete_on_termination": true,
                        "status": "attached",
                        "volume_id": "vol-0e7c780e0ee880a16"
                    }
                },
                "dns_name": "ec2-18-232-119-237.compute-1.amazonaws.com",
                "ebs_optimized": false,
                "groups": {
                    "sg-0ce48435c25d3fbd1": "Cluster Web DMZ"
                },
                "hypervisor": "xen",
                "id": "i-0b2bdcdda2d5def65",
                "image_id": "ami-0d5eff06f840b45e9",
                "instance_type": "t2.micro",
                "kernel": null,
                "key_name": "ec2_keypair",
                "launch_time": "2021-06-05T17:36:05.000Z",
                "placement": "us-east-1f",
                "private_dns_name": "ip-10-10-0-21.ec2.internal",
                "private_ip": "10.10.0.21",
                "public_dns_name": "ec2-18-232-119-237.compute-1.amazonaws.com",
                "public_ip": "18.232.119.237",
                "ramdisk": null,
                "region": "us-east-1",
                "root_device_name": "/dev/xvda",
                "root_device_type": "ebs",
                "state": "running",
                "state_code": 16,
                "tags": {
                    "Name": "worker-1"
                },
                "tenancy": "default",
                "virtualization_type": "hvm"
            }
        ]
    }
}
2021-06-05 18:18:07,568 p=1077880 u=snelson n=ansible | creating host via 'add_host': hostname=3.234.211.126
2021-06-05 18:18:07,578 p=1077390 u=snelson n=ansible | changed: [localhost] => (item={'changed': False, 'instance_ids': None, 'instances': [], 'tagged_instances': [{'id': 'i-07203e6087ff0fb5e', 'ami_launch_index': '0', 'private_ip': '10.10.0.25', 'private_dns_name': 'ip-10-10-0-25.ec2.internal', 'public_ip': '3.234.211.126', 'dns_name': 'ec2-3-234-211-126.compute-1.amazonaws.com', 'public_dns_name': 'ec2-3-234-211-126.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T17:36:55.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-0ce48435c25d3fbd1': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-0e95fe06c8a74ac3e', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-2'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-2'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '2', 'ansible_loop_var': 'item'}) => {
    "add_host": {
        "groups": [
            "workers"
        ],
        "host_name": "3.234.211.126",
        "host_vars": {}
    },
    "ansible_loop_var": "item",
    "changed": true,
    "item": {
        "ansible_loop_var": "item",
        "changed": false,
        "failed": false,
        "instance_ids": null,
        "instances": [],
        "invocation": {
            "module_args": {
                "assign_public_ip": null,
                "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
                "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
                "count": 1,
                "count_tag": {
                    "Name": "worker-2"
                },
                "debug_botocore_endpoint_logs": false,
                "ebs_optimized": false,
                "ec2_url": null,
                "exact_count": 1,
                "group": [
                    "Cluster Web DMZ"
                ],
                "group_id": null,
                "id": null,
                "image": "ami-0d5eff06f840b45e9",
                "instance_ids": null,
                "instance_initiated_shutdown_behavior": "stop",
                "instance_profile_name": null,
                "instance_tags": {
                    "Name": "worker-2"
                },
                "instance_type": "t2.micro",
                "kernel": null,
                "key_name": "ec2_keypair",
                "monitoring": false,
                "network_interfaces": null,
                "placement_group": null,
                "private_ip": null,
                "profile": null,
                "ramdisk": null,
                "region": "us-east-1",
                "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
                "source_dest_check": null,
                "spot_launch_group": null,
                "spot_price": null,
                "spot_type": "one-time",
                "spot_wait_timeout": 600,
                "state": "present",
                "tenancy": "default",
                "termination_protection": null,
                "user_data": null,
                "validate_certs": true,
                "volumes": null,
                "vpc_subnet_id": "subnet-0031ca01b5f194230",
                "wait": true,
                "wait_timeout": 300,
                "zone": null
            }
        },
        "item": "2",
        "tagged_instances": [
            {
                "ami_launch_index": "0",
                "architecture": "x86_64",
                "block_device_mapping": {
                    "/dev/xvda": {
                        "delete_on_termination": true,
                        "status": "attached",
                        "volume_id": "vol-0e95fe06c8a74ac3e"
                    }
                },
                "dns_name": "ec2-3-234-211-126.compute-1.amazonaws.com",
                "ebs_optimized": false,
                "groups": {
                    "sg-0ce48435c25d3fbd1": "Cluster Web DMZ"
                },
                "hypervisor": "xen",
                "id": "i-07203e6087ff0fb5e",
                "image_id": "ami-0d5eff06f840b45e9",
                "instance_type": "t2.micro",
                "kernel": null,
                "key_name": "ec2_keypair",
                "launch_time": "2021-06-05T17:36:55.000Z",
                "placement": "us-east-1f",
                "private_dns_name": "ip-10-10-0-25.ec2.internal",
                "private_ip": "10.10.0.25",
                "public_dns_name": "ec2-3-234-211-126.compute-1.amazonaws.com",
                "public_ip": "3.234.211.126",
                "ramdisk": null,
                "region": "us-east-1",
                "root_device_name": "/dev/xvda",
                "root_device_type": "ebs",
                "state": "running",
                "state_code": 16,
                "tags": {
                    "Name": "worker-2"
                },
                "tenancy": "default",
                "virtualization_type": "hvm"
            }
        ]
    }
}
2021-06-05 18:18:07,583 p=1077390 u=snelson n=ansible | TASK [ec2 : Create EC2 Load Balancer name={{ lb_name }}, state=present, region={{ region_name }}, subnets={{ vpc_subnet_id }}, listeners=[{'protocol': 'http', 'load_balancer_port': 80, 'instance_port': 80}], scheme=internet-facing, security_group_names={{ sg_name }}, health_check={'ping_protocol': 'http', 'ping_port': 80, 'ping_path': '/', 'response_timeout': 5, 'interval': 30, 'unhealthy_threshold': 2, 'healthy_threshold': 2}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:18:07,583 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:184
2021-06-05 18:18:07,642 p=1077882 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:18:07,642 p=1077882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:07,652 p=1077882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316 `" && echo ansible-tmp-1622917087.641612-190833115970316="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316 `" ) && sleep 0'
2021-06-05 18:18:07,871 p=1077882 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_elb_lb.py
2021-06-05 18:18:07,872 p=1077882 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmpc9m98kbh TO /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316/AnsiballZ_ec2_elb_lb.py
2021-06-05 18:18:07,873 p=1077882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316/ /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316/AnsiballZ_ec2_elb_lb.py && sleep 0'
2021-06-05 18:18:07,883 p=1077882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-fjeykijtzrawfpquiaqewkozyphchsjg ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316/AnsiballZ_ec2_elb_lb.py'"'"' && sleep 0'
2021-06-05 18:18:09,486 p=1077882 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917087.641612-190833115970316/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:09,510 p=1077390 u=snelson n=ansible | ok: [localhost] => {
    "ansible_facts": {
        "ec2_elb": "info"
    },
    "changed": false,
    "elb": {
        "app_cookie_policy": null,
        "backends": [],
        "connection_draining_timeout": 300,
        "cross_az_load_balancing": "no",
        "dns_name": "ec2-lb-1126046076.us-east-1.elb.amazonaws.com",
        "health_check": {
            "healthy_threshold": 2,
            "interval": 30,
            "target": "HTTP:80/",
            "timeout": 5,
            "unhealthy_threshold": 2
        },
        "hosted_zone_id": "Z35SXDOTRQ7X7K",
        "hosted_zone_name": "ec2-lb-1126046076.us-east-1.elb.amazonaws.com",
        "idle_timeout": 60,
        "in_service_count": 0,
        "instance_health": [
            {
                "instance_id": "i-0b2bdcdda2d5def65",
                "reason_code": "Instance",
                "state": "OutOfService"
            }
        ],
        "instances": [
            "i-0b2bdcdda2d5def65"
        ],
        "lb_cookie_policy": null,
        "listeners": [
            [
                80,
                80,
                "HTTP",
                "HTTP"
            ]
        ],
        "name": "ec2-lb",
        "out_of_service_count": 1,
        "proxy_policy": null,
        "region": "us-east-1",
        "scheme": "internet-facing",
        "security_group_ids": [
            "sg-0ce48435c25d3fbd1"
        ],
        "status": "ok",
        "subnets": [
            "subnet-0031ca01b5f194230"
        ],
        "tags": null,
        "unknown_instance_state_count": 0,
        "zones": [
            "us-east-1f"
        ]
    },
    "invocation": {
        "module_args": {
            "access_logs": null,
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "connection_draining_timeout": null,
            "cross_az_load_balancing": null,
            "debug_botocore_endpoint_logs": false,
            "ec2_url": null,
            "health_check": {
                "healthy_threshold": 2,
                "interval": 30,
                "ping_path": "/",
                "ping_port": 80,
                "ping_protocol": "http",
                "response_timeout": 5,
                "unhealthy_threshold": 2
            },
            "idle_timeout": null,
            "instance_ids": null,
            "listeners": [
                {
                    "instance_port": 80,
                    "load_balancer_port": 80,
                    "protocol": "http"
                }
            ],
            "name": "ec2-lb",
            "profile": null,
            "purge_instance_ids": false,
            "purge_listeners": true,
            "purge_subnets": false,
            "purge_zones": false,
            "region": "us-east-1",
            "scheme": "internet-facing",
            "security_group_ids": null,
            "security_group_names": [
                "Cluster Web DMZ"
            ],
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "stickiness": null,
            "subnets": [
                "subnet-0031ca01b5f194230"
            ],
            "tags": null,
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 60,
            "zones": null
        }
    }
}
2021-06-05 18:18:09,515 p=1077390 u=snelson n=ansible | TASK [ec2 : Add servers to Load Balancer state=present, instance_id={{ item.id }}, ec2_elbs={{ lb_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}, wait=False] ***
2021-06-05 18:18:09,515 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml:209
2021-06-05 18:18:09,586 p=1077929 u=snelson n=ansible | <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: snelson
2021-06-05 18:18:09,587 p=1077929 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'echo ~snelson && sleep 0'
2021-06-05 18:18:09,596 p=1077929 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983 `" && echo ansible-tmp-1622917089.585755-62450571791983="` echo /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983 `" ) && sleep 0'
2021-06-05 18:18:09,809 p=1077929 u=snelson n=ansible | Using module file /usr/lib/python3/dist-packages/ansible/modules/cloud/amazon/ec2_elb.py
2021-06-05 18:18:09,810 p=1077929 u=snelson n=ansible | <127.0.0.1> PUT /home/snelson/.ansible/tmp/ansible-local-1077390j0__qpra/tmp9wxr94ub TO /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983/AnsiballZ_ec2_elb.py
2021-06-05 18:18:09,811 p=1077929 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983/ /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983/AnsiballZ_ec2_elb.py && sleep 0'
2021-06-05 18:18:09,822 p=1077929 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'sudo -H -S -n  -u root /bin/sh -c '"'"'echo BECOME-SUCCESS-mcsvofwwnscdloiofypjildxdgjjzlka ; /usr/bin/python3 /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983/AnsiballZ_ec2_elb.py'"'"' && sleep 0'
2021-06-05 18:18:10,821 p=1077929 u=snelson n=ansible | <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /home/snelson/.ansible/tmp/ansible-tmp-1622917089.585755-62450571791983/ > /dev/null 2>&1 && sleep 0'
2021-06-05 18:18:10,841 p=1077390 u=snelson n=ansible | changed: [localhost] => (item={'id': 'i-0b2bdcdda2d5def65', 'ami_launch_index': '0', 'private_ip': '10.10.0.21', 'private_dns_name': 'ip-10-10-0-21.ec2.internal', 'public_ip': '18.232.119.237', 'dns_name': 'ec2-18-232-119-237.compute-1.amazonaws.com', 'public_dns_name': 'ec2-18-232-119-237.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T17:36:05.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-0ce48435c25d3fbd1': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-0e7c780e0ee880a16', 'delete_on_termination': True}}, 'tenancy': 'default'}) => {
    "ansible_facts": {
        "ec2_elbs": [
            "ec2-lb"
        ]
    },
    "ansible_loop_var": "item",
    "changed": true,
    "invocation": {
        "module_args": {
            "aws_access_key": "ASIA6OKL57MA7YO4CBY6",
            "aws_secret_key": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "debug_botocore_endpoint_logs": false,
            "ec2_elbs": [
                "ec2-lb"
            ],
            "ec2_url": null,
            "enable_availability_zone": true,
            "instance_id": "i-0b2bdcdda2d5def65",
            "profile": null,
            "region": "us-east-1",
            "security_token": "VALUE_SPECIFIED_IN_NO_LOG_PARAMETER",
            "state": "present",
            "validate_certs": true,
            "wait": false,
            "wait_timeout": 0
        }
    },
    "item": {
        "ami_launch_index": "0",
        "architecture": "x86_64",
        "block_device_mapping": {
            "/dev/xvda": {
                "delete_on_termination": true,
                "status": "attached",
                "volume_id": "vol-0e7c780e0ee880a16"
            }
        },
        "dns_name": "ec2-18-232-119-237.compute-1.amazonaws.com",
        "ebs_optimized": false,
        "groups": {
            "sg-0ce48435c25d3fbd1": "Cluster Web DMZ"
        },
        "hypervisor": "xen",
        "id": "i-0b2bdcdda2d5def65",
        "image_id": "ami-0d5eff06f840b45e9",
        "instance_type": "t2.micro",
        "kernel": null,
        "key_name": "ec2_keypair",
        "launch_time": "2021-06-05T17:36:05.000Z",
        "placement": "us-east-1f",
        "private_dns_name": "ip-10-10-0-21.ec2.internal",
        "private_ip": "10.10.0.21",
        "public_dns_name": "ec2-18-232-119-237.compute-1.amazonaws.com",
        "public_ip": "18.232.119.237",
        "ramdisk": null,
        "region": "us-east-1",
        "root_device_name": "/dev/xvda",
        "root_device_type": "ebs",
        "state": "running",
        "state_code": 16,
        "tags": {
            "Name": "worker-1"
        },
        "tenancy": "default",
        "virtualization_type": "hvm"
    }
}
2021-06-05 18:18:10,851 p=1077390 u=snelson n=ansible | META: ran handlers
2021-06-05 18:18:10,852 p=1077390 u=snelson n=ansible | META: ran handlers
2021-06-05 18:18:10,856 p=1077390 u=snelson n=ansible | PLAY [master] ******************************************************************************************************
2021-06-05 18:18:10,859 p=1077390 u=snelson n=ansible | META: ran handlers
2021-06-05 18:18:10,862 p=1077390 u=snelson n=ansible | TASK [Running Kubernetes Master Role name=master] ******************************************************************
2021-06-05 18:18:10,863 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/playbook.yml:14
2021-06-05 18:18:10,963 p=1077390 u=snelson n=ansible | TASK [master : Add kubeadm Repositories on Master name=kube, description=Kubernetes repo, baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch, enabled=1, gpgcheck=1, gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg] ***
2021-06-05 18:18:10,963 p=1077390 u=snelson n=ansible | task path: /home/snelson/sl-infraop/ansible/roles/master/tasks/main.yml:4
2021-06-05 18:18:10,984 p=1077960 u=snelson n=ansible | <34.196.213.250> ESTABLISH SSH CONNECTION FOR USER: ec2-user
2021-06-05 18:18:10,985 p=1077960 u=snelson n=ansible | <34.196.213.250> SSH: EXEC ssh -C -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o 'IdentityFile="/home/snelson/sl-infraop/ansible/ec2_keypair.pem"' -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="ec2-user"' -o ConnectTimeout=10 -o ControlPath=/home/snelson/.ansible/cp/3db416413f 34.196.213.250 '/bin/sh -c '"'"'echo ~ec2-user && sleep 0'"'"''
2021-06-05 18:18:11,410 p=1077960 u=snelson n=ansible | <34.196.213.250> (255, b'', b'ec2-user@34.196.213.250: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\r\n')
2021-06-05 18:18:11,417 p=1077390 u=snelson n=ansible | fatal: [34.196.213.250]: UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: ec2-user@34.196.213.250: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).",
    "unreachable": true
}
2021-06-05 18:18:11,419 p=1077390 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:18:11,419 p=1077390 u=snelson n=ansible | 34.196.213.250             : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:18:11,420 p=1077390 u=snelson n=ansible | localhost                  : ok=18   changed=6    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:20:57,194 p=1079125 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:20:57,480 p=1079125 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:20:57,500 p=1079125 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:20:57,611 p=1079125 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:20:58,766 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:20:58,770 p=1079125 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:20:59,928 p=1079125 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:20:59,932 p=1079125 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:21:00,801 p=1079125 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:21:00,804 p=1079125 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:21:02,775 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:02,780 p=1079125 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:21:02,834 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:02,839 p=1079125 u=snelson n=ansible | TASK [ec2 : Associate subnet to the VPC state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, cidr={{ subnet_cidr }}, map_public=True, resource_tags={'Name': '{{ subnet_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:21:04,325 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:04,329 p=1079125 u=snelson n=ansible | TASK [ec2 : Set vpc_subnet_id vpc_subnet_id={{ create_subnet.subnet.id }}] *****************************************
2021-06-05 18:21:04,389 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:04,393 p=1079125 u=snelson n=ansible | TASK [ec2 : Create IGW state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, tags={'Name': '{{ igw_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:21:05,600 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:05,604 p=1079125 u=snelson n=ansible | TASK [ec2 : Route IGW vpc_id={{ vpc_id }}, region={{ region_name }}, subnets=['{{ vpc_subnet_id }}'], routes=[{'dest': '0.0.0.0/0', 'gateway_id': '{{ igw.gateway_id }}'}], tags={'Name': 'Route IGW'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:21:07,290 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:07,295 p=1079125 u=snelson n=ansible | TASK [ec2 : Create EC2 Security Group name={{ sg_name }}, description=DMZ Security Group, vpc_id={{ vpc_id }}, region={{ region_name }}, state=present, rules=[{'proto': 'tcp', 'from_port': 80, 'to_port': 80, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 6443, 'to_port': 6443, 'cidr_ip': '0.0.0.0/0'}], aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:21:13,011 p=1079125 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:21:13,017 p=1079125 u=snelson n=ansible | TASK [ec2 : Set Security Group Id sg_id={{ security_group.group_id }}] *********************************************
2021-06-05 18:21:13,087 p=1079125 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:21:13,092 p=1079125 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Master key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'master'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'master'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:21:27,082 p=1079125 u=snelson n=ansible |  [ERROR]: User interrupted execution

2021-06-05 18:22:35,463 p=1080094 u=snelson n=ansible |  [ERROR]: User interrupted execution

2021-06-05 18:22:43,359 p=1080134 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:22:43,612 p=1080134 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:22:43,630 p=1080134 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:22:43,733 p=1080134 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:45,076 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:22:45,088 p=1080134 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:46,215 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:22:46,221 p=1080134 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_destination }}, mode=384] ***
2021-06-05 18:22:47,104 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:22:47,117 p=1080134 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:49,006 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:49,011 p=1080134 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:22:49,081 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:49,086 p=1080134 u=snelson n=ansible | TASK [ec2 : Associate subnet to the VPC state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, cidr={{ subnet_cidr }}, map_public=True, resource_tags={'Name': '{{ subnet_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:50,415 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:50,419 p=1080134 u=snelson n=ansible | TASK [ec2 : Set vpc_subnet_id vpc_subnet_id={{ create_subnet.subnet.id }}] *****************************************
2021-06-05 18:22:50,481 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:50,486 p=1080134 u=snelson n=ansible | TASK [ec2 : Create IGW state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, tags={'Name': '{{ igw_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:51,665 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:51,669 p=1080134 u=snelson n=ansible | TASK [ec2 : Route IGW vpc_id={{ vpc_id }}, region={{ region_name }}, subnets=['{{ vpc_subnet_id }}'], routes=[{'dest': '0.0.0.0/0', 'gateway_id': '{{ igw.gateway_id }}'}], tags={'Name': 'Route IGW'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:53,282 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:53,286 p=1080134 u=snelson n=ansible | TASK [ec2 : Create EC2 Security Group name={{ sg_name }}, description=DMZ Security Group, vpc_id={{ vpc_id }}, region={{ region_name }}, state=present, rules=[{'proto': 'tcp', 'from_port': 80, 'to_port': 80, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 6443, 'to_port': 6443, 'cidr_ip': '0.0.0.0/0'}], aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:22:58,772 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:22:58,776 p=1080134 u=snelson n=ansible | TASK [ec2 : Set Security Group Id sg_id={{ security_group.group_id }}] *********************************************
2021-06-05 18:22:58,846 p=1080134 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:22:58,850 p=1080134 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Master key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'master'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'master'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:23:32,903 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:23:32,908 p=1080134 u=snelson n=ansible | TASK [ec2 : Allocate Master Elastic IP state=present, device_id={{ master.tagged_instances[0].id }}, region={{ region_name }}, in_vpc=True, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:23:36,172 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:23:36,179 p=1080134 u=snelson n=ansible | TASK [ec2 : Add master to master group hostname={{ eip.public_ip }}, groupname=master] *****************************
2021-06-05 18:23:36,241 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:23:36,245 p=1080134 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Worker Nodes key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'worker-{{ item }}'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'worker-{{ item }}'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:24:15,156 p=1080134 u=snelson n=ansible | changed: [localhost] => (item=1)
2021-06-05 18:25:19,606 p=1080134 u=snelson n=ansible | changed: [localhost] => (item=2)
2021-06-05 18:25:19,611 p=1080134 u=snelson n=ansible | TASK [ec2 : Add Cluster Worker Nodes to Worker Group groupname=workers, hostname={{ item.tagged_instances[0].public_ip }}] ***
2021-06-05 18:25:19,686 p=1080134 u=snelson n=ansible | changed: [localhost] => (item={'changed': True, 'instance_ids': ['i-09229c3e2bbe181a3'], 'instances': [{'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'tagged_instances': [{'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-1'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-1'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '1', 'ansible_loop_var': 'item'})
2021-06-05 18:25:19,694 p=1080134 u=snelson n=ansible | changed: [localhost] => (item={'changed': True, 'instance_ids': ['i-0622024ab494ab9ac'], 'instances': [{'id': 'i-0622024ab494ab9ac', 'ami_launch_index': '0', 'private_ip': '10.10.0.13', 'private_dns_name': 'ip-10-10-0-13.ec2.internal', 'public_ip': '34.204.188.159', 'dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:24:17.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-07bb1ce6aeac089b3', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'tagged_instances': [{'id': 'i-0622024ab494ab9ac', 'ami_launch_index': '0', 'private_ip': '10.10.0.13', 'private_dns_name': 'ip-10-10-0-13.ec2.internal', 'public_ip': '34.204.188.159', 'dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:24:17.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-07bb1ce6aeac089b3', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-2'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-2'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '2', 'ansible_loop_var': 'item'})
2021-06-05 18:25:19,701 p=1080134 u=snelson n=ansible | TASK [ec2 : Create EC2 Load Balancer name={{ lb_name }}, state=present, region={{ region_name }}, subnets={{ vpc_subnet_id }}, listeners=[{'protocol': 'http', 'load_balancer_port': 80, 'instance_port': 80}], scheme=internet-facing, security_group_names={{ sg_name }}, health_check={'ping_protocol': 'http', 'ping_port': 80, 'ping_path': '/', 'response_timeout': 5, 'interval': 30, 'unhealthy_threshold': 2, 'healthy_threshold': 2}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:25:22,249 p=1080134 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:25:22,254 p=1080134 u=snelson n=ansible | TASK [ec2 : Add servers to Load Balancer state=present, instance_id={{ item.id }}, ec2_elbs={{ lb_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}, wait=False] ***
2021-06-05 18:25:23,923 p=1080134 u=snelson n=ansible | changed: [localhost] => (item={'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'})
2021-06-05 18:25:23,930 p=1080134 u=snelson n=ansible | PLAY [master] ******************************************************************************************************
2021-06-05 18:25:23,935 p=1080134 u=snelson n=ansible | TASK [Running Kubernetes Master Role name=master] ******************************************************************
2021-06-05 18:25:24,051 p=1080134 u=snelson n=ansible | TASK [master : Add kubeadm Repositories on Master name=kube, description=Kubernetes repo, baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch, enabled=1, gpgcheck=1, gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg] ***
2021-06-05 18:25:24,486 p=1080134 u=snelson n=ansible | fatal: [52.200.212.204]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '52.200.212.204' (ECDSA) to the list of known hosts.\r\nec2-user@52.200.212.204: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).", "unreachable": true}
2021-06-05 18:25:24,488 p=1080134 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:25:24,488 p=1080134 u=snelson n=ansible | 52.200.212.204             : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:25:24,489 p=1080134 u=snelson n=ansible | localhost                  : ok=18   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:36:36,790 p=1086473 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:36:37,061 p=1086473 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:36:37,084 p=1086473 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:36:37,199 p=1086473 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:36:38,705 p=1086473 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:36:38,709 p=1086473 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:36:39,802 p=1086473 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:36:39,807 p=1086473 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_namE }}, mode=384] *****
2021-06-05 18:36:39,865 p=1086473 u=snelson n=ansible | fatal: [localhost]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'ec2_keypair_namE' is undefined\n\nThe error appears to be in '/home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml': line 22, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Save EC2 private key\n  ^ here\n"}
2021-06-05 18:36:39,867 p=1086473 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:36:39,868 p=1086473 u=snelson n=ansible | localhost                  : ok=2    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-06-05 18:37:07,627 p=1086749 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:37:07,870 p=1086749 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:37:07,890 p=1086749 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:37:07,947 p=1086749 u=snelson n=ansible | ERROR! Decryption failed (no vault secrets were found that could decrypt) on /home/snelson/sl-infraop/ansible/roles/ec2/defaults/main.yml
2021-06-05 18:37:07,949 p=1086749 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:37:11,350 p=1086794 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:37:11,598 p=1086794 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:37:11,616 p=1086794 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:37:11,719 p=1086794 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:13,011 p=1086794 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:37:13,016 p=1086794 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:14,170 p=1086794 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:37:14,175 p=1086794 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_name }}, mode=384] *****
2021-06-05 18:37:15,041 p=1086794 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:37:15,049 p=1086794 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:17,295 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:17,299 p=1086794 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:37:17,362 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:17,366 p=1086794 u=snelson n=ansible | TASK [ec2 : Associate subnet to the VPC state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, cidr={{ subnet_cidr }}, map_public=True, resource_tags={'Name': '{{ subnet_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:18,700 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:18,704 p=1086794 u=snelson n=ansible | TASK [ec2 : Set vpc_subnet_id vpc_subnet_id={{ create_subnet.subnet.id }}] *****************************************
2021-06-05 18:37:18,761 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:18,766 p=1086794 u=snelson n=ansible | TASK [ec2 : Create IGW state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, tags={'Name': '{{ igw_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:19,963 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:19,967 p=1086794 u=snelson n=ansible | TASK [ec2 : Route IGW vpc_id={{ vpc_id }}, region={{ region_name }}, subnets=['{{ vpc_subnet_id }}'], routes=[{'dest': '0.0.0.0/0', 'gateway_id': '{{ igw.gateway_id }}'}], tags={'Name': 'Route IGW'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:21,638 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:21,643 p=1086794 u=snelson n=ansible | TASK [ec2 : Create EC2 Security Group name={{ sg_name }}, description=DMZ Security Group, vpc_id={{ vpc_id }}, region={{ region_name }}, state=present, rules=[{'proto': 'tcp', 'from_port': 80, 'to_port': 80, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 6443, 'to_port': 6443, 'cidr_ip': '0.0.0.0/0'}], aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:23,419 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:23,422 p=1086794 u=snelson n=ansible | TASK [ec2 : Set Security Group Id sg_id={{ security_group.group_id }}] *********************************************
2021-06-05 18:37:23,482 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:23,485 p=1086794 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Master key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'master'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'master'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:52,241 p=1086794 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:37:52,244 p=1086794 u=snelson n=ansible | TASK [ec2 : Allocate Master Elastic IP state=present, device_id={{ master.tagged_instances[0].id }}, region={{ region_name }}, in_vpc=True, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:54,974 p=1086794 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:37:54,978 p=1086794 u=snelson n=ansible | TASK [ec2 : Add master to master group hostname={{ eip.public_ip }}, groupname=master] *****************************
2021-06-05 18:37:55,047 p=1086794 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:37:55,050 p=1086794 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Worker Nodes key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'worker-{{ item }}'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'worker-{{ item }}'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:56,207 p=1086794 u=snelson n=ansible | ok: [localhost] => (item=1)
2021-06-05 18:37:57,236 p=1086794 u=snelson n=ansible | ok: [localhost] => (item=2)
2021-06-05 18:37:57,246 p=1086794 u=snelson n=ansible | TASK [ec2 : Add Cluster Worker Nodes to Worker Group groupname=workers, hostname={{ item.tagged_instances[0].public_ip }}] ***
2021-06-05 18:37:57,317 p=1086794 u=snelson n=ansible | changed: [localhost] => (item={'changed': False, 'instance_ids': None, 'instances': [], 'tagged_instances': [{'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-1'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-1'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '1', 'ansible_loop_var': 'item'})
2021-06-05 18:37:57,324 p=1086794 u=snelson n=ansible | changed: [localhost] => (item={'changed': False, 'instance_ids': None, 'instances': [], 'tagged_instances': [{'id': 'i-0622024ab494ab9ac', 'ami_launch_index': '0', 'private_ip': '10.10.0.13', 'private_dns_name': 'ip-10-10-0-13.ec2.internal', 'public_ip': '34.204.188.159', 'dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:24:17.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-07bb1ce6aeac089b3', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-2'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-2'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '2', 'ansible_loop_var': 'item'})
2021-06-05 18:37:57,330 p=1086794 u=snelson n=ansible | TASK [ec2 : Create EC2 Load Balancer name={{ lb_name }}, state=present, region={{ region_name }}, subnets={{ vpc_subnet_id }}, listeners=[{'protocol': 'http', 'load_balancer_port': 80, 'instance_port': 80}], scheme=internet-facing, security_group_names={{ sg_name }}, health_check={'ping_protocol': 'http', 'ping_port': 80, 'ping_path': '/', 'response_timeout': 5, 'interval': 30, 'unhealthy_threshold': 2, 'healthy_threshold': 2}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:37:59,456 p=1086794 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:37:59,460 p=1086794 u=snelson n=ansible | TASK [ec2 : Add servers to Load Balancer state=present, instance_id={{ item.id }}, ec2_elbs={{ lb_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}, wait=False] ***
2021-06-05 18:38:00,826 p=1086794 u=snelson n=ansible | changed: [localhost] => (item={'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'})
2021-06-05 18:38:00,834 p=1086794 u=snelson n=ansible | PLAY [master] ******************************************************************************************************
2021-06-05 18:38:00,839 p=1086794 u=snelson n=ansible | TASK [Running Kubernetes Master Role name=master] ******************************************************************
2021-06-05 18:38:00,926 p=1086794 u=snelson n=ansible | TASK [master : Add kubeadm Repositories on Master name=kube, description=Kubernetes repo, baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch, enabled=1, gpgcheck=1, gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg] ***
2021-06-05 18:38:00,984 p=1086794 u=snelson n=ansible | fatal: [3.232.248.132]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 3.232.248.132 port 22: Connection refused", "unreachable": true}
2021-06-05 18:38:00,986 p=1086794 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:38:00,986 p=1086794 u=snelson n=ansible | 3.232.248.132              : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:38:00,987 p=1086794 u=snelson n=ansible | localhost                  : ok=18   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:40:18,243 p=1088563 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:40:18,517 p=1088563 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:40:23,106 p=1088563 u=snelson n=ansible | Perform task: TASK: Running Cluster EC2 Role (N)o/(y)es/(c)ontinue: ************************************************
2021-06-05 18:40:23,112 p=1088563 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:40:27,831 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Delete EC2 private key on AWS (N)o/(y)es/(c)ontinue: *************************************
2021-06-05 18:40:30,082 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 private key (N)o/(y)es/(c)ontinue: ********************************************
2021-06-05 18:40:31,940 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Save EC2 private key (N)o/(y)es/(c)ontinue: **********************************************
2021-06-05 18:40:33,945 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 VPC (N)o/(y)es/(c)ontinue: ****************************************************
2021-06-05 18:40:35,394 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Set vpc_id (N)o/(y)es/(c)ontinue: ********************************************************
2021-06-05 18:40:38,803 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Associate subnet to the VPC (N)o/(y)es/(c)ontinue: ***************************************
2021-06-05 18:40:40,233 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Set vpc_subnet_id (N)o/(y)es/(c)ontinue: *************************************************
2021-06-05 18:40:41,693 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Create IGW (N)o/(y)es/(c)ontinue: ********************************************************
2021-06-05 18:40:42,930 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Route IGW (N)o/(y)es/(c)ontinue: *********************************************************
2021-06-05 18:40:44,093 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 Security Group (N)o/(y)es/(c)ontinue: *****************************************
2021-06-05 18:40:45,528 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Set Security Group Id (N)o/(y)es/(c)ontinue: *********************************************
2021-06-05 18:40:46,647 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Add EC2 Cluster Master (N)o/(y)es/(c)ontinue: ********************************************
2021-06-05 18:40:48,989 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Allocate Master Elastic IP (N)o/(y)es/(c)ontinue: ****************************************
2021-06-05 18:40:54,217 p=1088563 u=snelson n=ansible | Perform task: TASK: ec2 : Add master to master group (N)o/(y)es/(c)ontinue: ****************************************
2021-06-05 18:40:54,220 p=1088563 u=snelson n=ansible | TASK [ec2 : Add master to master group hostname={{ eip.public_ip }}, groupname=master] *****************************
2021-06-05 18:40:54,292 p=1088563 u=snelson n=ansible | fatal: [localhost]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'eip' is undefined\n\nThe error appears to be in '/home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml': line 150, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Add master to master group\n  ^ here\n"}
2021-06-05 18:40:54,293 p=1088563 u=snelson n=ansible | NO MORE HOSTS LEFT *************************************************************************************************
2021-06-05 18:40:54,294 p=1088563 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:40:54,295 p=1088563 u=snelson n=ansible | localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-06-05 18:41:06,565 p=1088919 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:41:06,861 p=1088919 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:41:09,582 p=1088919 u=snelson n=ansible | Perform task: TASK: Running Cluster EC2 Role (N)o/(y)es/(c)ontinue: ************************************************
2021-06-05 18:41:09,587 p=1088919 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:41:12,915 p=1088919 u=snelson n=ansible | Perform task: TASK: ec2 : Delete EC2 private key on AWS (N)o/(y)es/(c)ontinue: *************************************
2021-06-05 18:41:14,699 p=1088919 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 private key (N)o/(y)es/(c)ontinue: ********************************************
2021-06-05 18:41:18,430 p=1088919 u=snelson n=ansible | Perform task: TASK: ec2 : Save EC2 private key (N)o/(y)es/(c)ontinue: **********************************************
2021-06-05 18:41:21,870 p=1088919 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 VPC (N)o/(y)es/(c)ontinue: ****************************************************
2021-06-05 18:41:25,789 p=1088919 u=snelson n=ansible | Perform task: TASK: ec2 : Set vpc_id (N)o/(y)es/(c)ontinue: ********************************************************
2021-06-05 18:41:25,792 p=1088919 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:41:25,860 p=1088919 u=snelson n=ansible | fatal: [localhost]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'create_vpc' is undefined\n\nThe error appears to be in '/home/snelson/sl-infraop/ansible/roles/ec2/tasks/main.yml': line 40, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Set vpc_id\n  ^ here\n"}
2021-06-05 18:41:25,865 p=1088919 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:41:25,865 p=1088919 u=snelson n=ansible | localhost                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2021-06-05 18:41:36,250 p=1089134 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:41:36,541 p=1089134 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:41:39,060 p=1089134 u=snelson n=ansible | Perform task: TASK: Running Cluster EC2 Role (N)o/(y)es/(c)ontinue: ************************************************
2021-06-05 18:41:39,064 p=1089134 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:41:39,119 p=1089134 u=snelson n=ansible | ERROR! Decryption failed (no vault secrets were found that could decrypt) on /home/snelson/sl-infraop/ansible/roles/ec2/defaults/main.yml
2021-06-05 18:41:39,120 p=1089134 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:41:43,325 p=1089197 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:41:43,592 p=1089197 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:41:45,490 p=1089197 u=snelson n=ansible | Perform task: TASK: Running Cluster EC2 Role (N)o/(y)es/(c)ontinue: ************************************************
2021-06-05 18:41:45,495 p=1089197 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:41:46,973 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Delete EC2 private key on AWS (N)o/(y)es/(c)ontinue: *************************************
2021-06-05 18:41:48,696 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 private key (N)o/(y)es/(c)ontinue: ********************************************
2021-06-05 18:41:52,735 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Save EC2 private key (N)o/(y)es/(c)ontinue: **********************************************
2021-06-05 18:41:55,097 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 VPC (N)o/(y)es/(c)ontinue: ****************************************************
2021-06-05 18:41:55,099 p=1089197 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:41:57,216 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:00,048 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Set vpc_id (N)o/(y)es/(c)ontinue: ********************************************************
2021-06-05 18:42:00,052 p=1089197 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:42:00,109 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:02,392 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Associate subnet to the VPC (N)o/(y)es/(c)ontinue: ***************************************
2021-06-05 18:42:02,395 p=1089197 u=snelson n=ansible | TASK [ec2 : Associate subnet to the VPC state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, cidr={{ subnet_cidr }}, map_public=True, resource_tags={'Name': '{{ subnet_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:03,810 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:05,429 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Set vpc_subnet_id (N)o/(y)es/(c)ontinue: *************************************************
2021-06-05 18:42:05,433 p=1089197 u=snelson n=ansible | TASK [ec2 : Set vpc_subnet_id vpc_subnet_id={{ create_subnet.subnet.id }}] *****************************************
2021-06-05 18:42:05,502 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:06,908 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Create IGW (N)o/(y)es/(c)ontinue: ********************************************************
2021-06-05 18:42:06,911 p=1089197 u=snelson n=ansible | TASK [ec2 : Create IGW state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, tags={'Name': '{{ igw_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:08,071 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:09,340 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Route IGW (N)o/(y)es/(c)ontinue: *********************************************************
2021-06-05 18:42:09,343 p=1089197 u=snelson n=ansible | TASK [ec2 : Route IGW vpc_id={{ vpc_id }}, region={{ region_name }}, subnets=['{{ vpc_subnet_id }}'], routes=[{'dest': '0.0.0.0/0', 'gateway_id': '{{ igw.gateway_id }}'}], tags={'Name': 'Route IGW'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:10,947 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:12,480 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 Security Group (N)o/(y)es/(c)ontinue: *****************************************
2021-06-05 18:42:12,483 p=1089197 u=snelson n=ansible | TASK [ec2 : Create EC2 Security Group name={{ sg_name }}, description=DMZ Security Group, vpc_id={{ vpc_id }}, region={{ region_name }}, state=present, rules=[{'proto': 'tcp', 'from_port': 80, 'to_port': 80, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 6443, 'to_port': 6443, 'cidr_ip': '0.0.0.0/0'}], aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:14,333 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:15,947 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Set Security Group Id (N)o/(y)es/(c)ontinue: *********************************************
2021-06-05 18:42:15,950 p=1089197 u=snelson n=ansible | TASK [ec2 : Set Security Group Id sg_id={{ security_group.group_id }}] *********************************************
2021-06-05 18:42:16,012 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:20,309 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Add EC2 Cluster Master (N)o/(y)es/(c)ontinue: ********************************************
2021-06-05 18:42:20,312 p=1089197 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Master key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'master'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'master'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:21,741 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:23,209 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Allocate Master Elastic IP (N)o/(y)es/(c)ontinue: ****************************************
2021-06-05 18:42:23,212 p=1089197 u=snelson n=ansible | TASK [ec2 : Allocate Master Elastic IP state=present, device_id={{ master.tagged_instances[0].id }}, region={{ region_name }}, in_vpc=True, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:24,580 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:26,346 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Add master to master group (N)o/(y)es/(c)ontinue: ****************************************
2021-06-05 18:42:26,349 p=1089197 u=snelson n=ansible | TASK [ec2 : Add master to master group hostname={{ eip.public_ip }}, groupname=master] *****************************
2021-06-05 18:42:26,407 p=1089197 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:42:28,089 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Add EC2 Cluster Worker Nodes (N)o/(y)es/(c)ontinue: **************************************
2021-06-05 18:42:28,094 p=1089197 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Worker Nodes key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'worker-{{ item }}'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'worker-{{ item }}'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:29,188 p=1089197 u=snelson n=ansible | ok: [localhost] => (item=1)
2021-06-05 18:42:30,146 p=1089197 u=snelson n=ansible | ok: [localhost] => (item=2)
2021-06-05 18:42:31,689 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Add Cluster Worker Nodes to Worker Group (N)o/(y)es/(c)ontinue: **************************
2021-06-05 18:42:31,693 p=1089197 u=snelson n=ansible | TASK [ec2 : Add Cluster Worker Nodes to Worker Group groupname=workers, hostname={{ item.tagged_instances[0].public_ip }}] ***
2021-06-05 18:42:31,763 p=1089197 u=snelson n=ansible | changed: [localhost] => (item={'changed': False, 'instance_ids': None, 'instances': [], 'tagged_instances': [{'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-1'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-1'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '1', 'ansible_loop_var': 'item'})
2021-06-05 18:42:31,772 p=1089197 u=snelson n=ansible | changed: [localhost] => (item={'changed': False, 'instance_ids': None, 'instances': [], 'tagged_instances': [{'id': 'i-0622024ab494ab9ac', 'ami_launch_index': '0', 'private_ip': '10.10.0.13', 'private_dns_name': 'ip-10-10-0-13.ec2.internal', 'public_ip': '34.204.188.159', 'dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-188-159.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:24:17.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-07bb1ce6aeac089b3', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-2'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-0031ca01b5f194230', 'count_tag': {'Name': 'worker-2'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '2', 'ansible_loop_var': 'item'})
2021-06-05 18:42:33,888 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Create EC2 Load Balancer (N)o/(y)es/(c)ontinue: ******************************************
2021-06-05 18:42:33,892 p=1089197 u=snelson n=ansible | TASK [ec2 : Create EC2 Load Balancer name={{ lb_name }}, state=present, region={{ region_name }}, subnets={{ vpc_subnet_id }}, listeners=[{'protocol': 'http', 'load_balancer_port': 80, 'instance_port': 80}], scheme=internet-facing, security_group_names={{ sg_name }}, health_check={'ping_protocol': 'http', 'ping_port': 80, 'ping_path': '/', 'response_timeout': 5, 'interval': 30, 'unhealthy_threshold': 2, 'healthy_threshold': 2}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:42:35,849 p=1089197 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:42:37,775 p=1089197 u=snelson n=ansible | Perform task: TASK: ec2 : Add servers to Load Balancer (N)o/(y)es/(c)ontinue: **************************************
2021-06-05 18:42:37,778 p=1089197 u=snelson n=ansible | TASK [ec2 : Add servers to Load Balancer state=present, instance_id={{ item.id }}, ec2_elbs={{ lb_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}, wait=False] ***
2021-06-05 18:42:39,122 p=1089197 u=snelson n=ansible | changed: [localhost] => (item={'id': 'i-09229c3e2bbe181a3', 'ami_launch_index': '0', 'private_ip': '10.10.0.60', 'private_dns_name': 'ip-10-10-0-60.ec2.internal', 'public_ip': '34.204.196.100', 'dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'public_dns_name': 'ec2-34-204-196-100.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1f', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:23:38.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-015d18137b48c97da': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-023621f1e56fa8f8c', 'delete_on_termination': True}}, 'tenancy': 'default'})
2021-06-05 18:42:39,127 p=1089197 u=snelson n=ansible | PLAY [master] ******************************************************************************************************
2021-06-05 18:42:47,339 p=1089197 u=snelson n=ansible | Perform task: TASK: Running Kubernetes Master Role (N)o/(y)es/(c)ontinue: ******************************************
2021-06-05 18:42:47,342 p=1089197 u=snelson n=ansible | TASK [Running Kubernetes Master Role name=master] ******************************************************************
2021-06-05 18:42:52,315 p=1089197 u=snelson n=ansible | Perform task: TASK: master : Add kubeadm Repositories on Master (N)o/(y)es/(c)ontinue: *****************************
2021-06-05 18:42:52,318 p=1089197 u=snelson n=ansible | TASK [master : Add kubeadm Repositories on Master name=kube, description=Kubernetes repo, baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch, enabled=1, gpgcheck=1, gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg] ***
2021-06-05 18:42:53,904 p=1089197 u=snelson n=ansible | [WARNING]: Platform linux on host 3.232.248.132 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-06-05 18:42:53,906 p=1089197 u=snelson n=ansible | changed: [3.232.248.132]
2021-06-05 18:43:01,108 p=1089197 u=snelson n=ansible |  [ERROR]: User interrupted execution

2021-06-05 18:49:03,597 p=1092587 u=snelson n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not
match 'all'

2021-06-05 18:49:03,869 p=1092587 u=snelson n=ansible | PLAY [localhost] ***************************************************************************************************
2021-06-05 18:49:03,887 p=1092587 u=snelson n=ansible | TASK [Running Cluster EC2 Role name=ec2] ***************************************************************************
2021-06-05 18:49:04,012 p=1092587 u=snelson n=ansible | TASK [ec2 : Delete EC2 private key on AWS name={{ ec2_keypair_name }}, state=absent, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:49:05,341 p=1092587 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:49:05,345 p=1092587 u=snelson n=ansible | TASK [ec2 : Create EC2 private key name={{ ec2_keypair_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:49:06,521 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:49:06,526 p=1092587 u=snelson n=ansible | TASK [ec2 : Save EC2 private key content={{ keypair.key.private_key }}, dest={{ ec2_keypair_name }}, mode=384] *****
2021-06-05 18:49:07,380 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:49:07,383 p=1092587 u=snelson n=ansible | TASK [ec2 : Create EC2 VPC name={{ vpc_name }}, cidr_block={{ vpc_cidr }}, region={{ region_name }}, state=present, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:51:46,679 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:51:46,686 p=1092587 u=snelson n=ansible | TASK [ec2 : Set vpc_id vpc_id={{ create_vpc.vpc.id }}] *************************************************************
2021-06-05 18:51:46,750 p=1092587 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:51:46,756 p=1092587 u=snelson n=ansible | TASK [ec2 : Associate subnet to the VPC state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, cidr={{ subnet_cidr }}, map_public=True, resource_tags={'Name': '{{ subnet_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:51:49,348 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:51:49,353 p=1092587 u=snelson n=ansible | TASK [ec2 : Set vpc_subnet_id vpc_subnet_id={{ create_subnet.subnet.id }}] *****************************************
2021-06-05 18:51:49,421 p=1092587 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:51:49,426 p=1092587 u=snelson n=ansible | TASK [ec2 : Create IGW state=present, vpc_id={{ vpc_id }}, region={{ region_name }}, tags={'Name': '{{ igw_name }}'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:51:51,116 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:51:51,121 p=1092587 u=snelson n=ansible | TASK [ec2 : Route IGW vpc_id={{ vpc_id }}, region={{ region_name }}, subnets=['{{ vpc_subnet_id }}'], routes=[{'dest': '0.0.0.0/0', 'gateway_id': '{{ igw.gateway_id }}'}], tags={'Name': 'Route IGW'}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:51:58,806 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:51:58,810 p=1092587 u=snelson n=ansible | TASK [ec2 : Create EC2 Security Group name={{ sg_name }}, description=DMZ Security Group, vpc_id={{ vpc_id }}, region={{ region_name }}, state=present, rules=[{'proto': 'tcp', 'from_port': 80, 'to_port': 80, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 22, 'to_port': 22, 'cidr_ip': '0.0.0.0/0'}, {'proto': 'tcp', 'from_port': 6443, 'to_port': 6443, 'cidr_ip': '0.0.0.0/0'}], aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:52:04,901 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:52:04,904 p=1092587 u=snelson n=ansible | TASK [ec2 : Set Security Group Id sg_id={{ security_group.group_id }}] *********************************************
2021-06-05 18:52:04,974 p=1092587 u=snelson n=ansible | ok: [localhost]
2021-06-05 18:52:04,982 p=1092587 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Master key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'master'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'master'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:52:29,102 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:52:29,106 p=1092587 u=snelson n=ansible | TASK [ec2 : Allocate Master Elastic IP state=present, device_id={{ master.tagged_instances[0].id }}, region={{ region_name }}, in_vpc=True, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:52:31,707 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:52:31,712 p=1092587 u=snelson n=ansible | TASK [ec2 : Add master to master group hostname={{ eip.public_ip }}, groupname=master] *****************************
2021-06-05 18:52:31,770 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:52:31,774 p=1092587 u=snelson n=ansible | TASK [ec2 : Add EC2 Cluster Worker Nodes key_name={{ ec2_keypair_name }}, instance_type={{ instance_flavour }}, image={{ ami_id }}, wait=True, instance_tags={'Name': 'worker-{{ item }}'}, region={{ region_name }}, group={{ sg_name }}, vpc_subnet_id={{ vpc_subnet_id }}, count_tag={'Name': 'worker-{{ item }}'}, exact_count=1, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:52:55,878 p=1092587 u=snelson n=ansible | changed: [localhost] => (item=1)
2021-06-05 18:53:24,541 p=1092587 u=snelson n=ansible | changed: [localhost] => (item=2)
2021-06-05 18:53:24,546 p=1092587 u=snelson n=ansible | TASK [ec2 : Add Cluster Worker Nodes to Worker Group groupname=workers, hostname={{ item.tagged_instances[0].public_ip }}] ***
2021-06-05 18:53:24,618 p=1092587 u=snelson n=ansible | changed: [localhost] => (item={'changed': True, 'instance_ids': ['i-001885633fb7992ef'], 'instances': [{'id': 'i-001885633fb7992ef', 'ami_launch_index': '0', 'private_ip': '10.10.0.22', 'private_dns_name': 'ip-10-10-0-22.ec2.internal', 'public_ip': '100.25.46.44', 'dns_name': 'ec2-100-25-46-44.compute-1.amazonaws.com', 'public_dns_name': 'ec2-100-25-46-44.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1e', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:52:34.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-0e00485d8e031b46e': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-0e41d8b530b3b3723', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'tagged_instances': [{'id': 'i-001885633fb7992ef', 'ami_launch_index': '0', 'private_ip': '10.10.0.22', 'private_dns_name': 'ip-10-10-0-22.ec2.internal', 'public_ip': '100.25.46.44', 'dns_name': 'ec2-100-25-46-44.compute-1.amazonaws.com', 'public_dns_name': 'ec2-100-25-46-44.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1e', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:52:34.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-0e00485d8e031b46e': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-0e41d8b530b3b3723', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-1'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-098059a0dce1d5dc9', 'count_tag': {'Name': 'worker-1'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '1', 'ansible_loop_var': 'item'})
2021-06-05 18:53:24,627 p=1092587 u=snelson n=ansible | changed: [localhost] => (item={'changed': True, 'instance_ids': ['i-0cb31610ab006b329'], 'instances': [{'id': 'i-0cb31610ab006b329', 'ami_launch_index': '0', 'private_ip': '10.10.0.43', 'private_dns_name': 'ip-10-10-0-43.ec2.internal', 'public_ip': '52.73.27.129', 'dns_name': 'ec2-52-73-27-129.compute-1.amazonaws.com', 'public_dns_name': 'ec2-52-73-27-129.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1e', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:52:58.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-0e00485d8e031b46e': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-00022924dce1ed8b3', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'tagged_instances': [{'id': 'i-0cb31610ab006b329', 'ami_launch_index': '0', 'private_ip': '10.10.0.43', 'private_dns_name': 'ip-10-10-0-43.ec2.internal', 'public_ip': '52.73.27.129', 'dns_name': 'ec2-52-73-27-129.compute-1.amazonaws.com', 'public_dns_name': 'ec2-52-73-27-129.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1e', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:52:58.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-2'}, 'groups': {'sg-0e00485d8e031b46e': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-00022924dce1ed8b3', 'delete_on_termination': True}}, 'tenancy': 'default'}], 'invocation': {'module_args': {'key_name': 'ec2_keypair', 'instance_type': 't2.micro', 'image': 'ami-0d5eff06f840b45e9', 'wait': True, 'instance_tags': {'Name': 'worker-2'}, 'region': 'us-east-1', 'group': ['Cluster Web DMZ'], 'vpc_subnet_id': 'subnet-098059a0dce1d5dc9', 'count_tag': {'Name': 'worker-2'}, 'exact_count': 1, 'aws_access_key': 'ASIA6OKL57MA7YO4CBY6', 'aws_secret_key': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'security_token': 'VALUE_SPECIFIED_IN_NO_LOG_PARAMETER', 'debug_botocore_endpoint_logs': False, 'validate_certs': True, 'spot_type': 'one-time', 'count': 1, 'monitoring': False, 'wait_timeout': 300, 'spot_wait_timeout': 600, 'state': 'present', 'instance_initiated_shutdown_behavior': 'stop', 'ebs_optimized': False, 'tenancy': 'default', 'ec2_url': None, 'profile': None, 'id': None, 'group_id': None, 'zone': None, 'spot_price': None, 'spot_launch_group': None, 'kernel': None, 'ramdisk': None, 'placement_group': None, 'user_data': None, 'assign_public_ip': None, 'private_ip': None, 'instance_profile_name': None, 'instance_ids': None, 'source_dest_check': None, 'termination_protection': None, 'volumes': None, 'network_interfaces': None}}, 'failed': False, 'item': '2', 'ansible_loop_var': 'item'})
2021-06-05 18:53:24,632 p=1092587 u=snelson n=ansible | TASK [ec2 : Create EC2 Load Balancer name={{ lb_name }}, state=present, region={{ region_name }}, subnets={{ vpc_subnet_id }}, listeners=[{'protocol': 'http', 'load_balancer_port': 80, 'instance_port': 80}], scheme=internet-facing, security_group_names={{ sg_name }}, health_check={'ping_protocol': 'http', 'ping_port': 80, 'ping_path': '/', 'response_timeout': 5, 'interval': 30, 'unhealthy_threshold': 2, 'healthy_threshold': 2}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}] ***
2021-06-05 18:53:27,133 p=1092587 u=snelson n=ansible | changed: [localhost]
2021-06-05 18:53:27,138 p=1092587 u=snelson n=ansible | TASK [ec2 : Add servers to Load Balancer state=present, instance_id={{ item.id }}, ec2_elbs={{ lb_name }}, region={{ region_name }}, aws_access_key={{ access_key }}, aws_secret_key={{ secret_key }}, security_token={{ security_token }}, wait=False] ***
2021-06-05 18:53:28,584 p=1092587 u=snelson n=ansible | changed: [localhost] => (item={'id': 'i-001885633fb7992ef', 'ami_launch_index': '0', 'private_ip': '10.10.0.22', 'private_dns_name': 'ip-10-10-0-22.ec2.internal', 'public_ip': '100.25.46.44', 'dns_name': 'ec2-100-25-46-44.compute-1.amazonaws.com', 'public_dns_name': 'ec2-100-25-46-44.compute-1.amazonaws.com', 'state_code': 16, 'architecture': 'x86_64', 'image_id': 'ami-0d5eff06f840b45e9', 'key_name': 'ec2_keypair', 'placement': 'us-east-1e', 'region': 'us-east-1', 'kernel': None, 'ramdisk': None, 'launch_time': '2021-06-05T18:52:34.000Z', 'instance_type': 't2.micro', 'root_device_type': 'ebs', 'root_device_name': '/dev/xvda', 'state': 'running', 'hypervisor': 'xen', 'tags': {'Name': 'worker-1'}, 'groups': {'sg-0e00485d8e031b46e': 'Cluster Web DMZ'}, 'virtualization_type': 'hvm', 'ebs_optimized': False, 'block_device_mapping': {'/dev/xvda': {'status': 'attached', 'volume_id': 'vol-0e41d8b530b3b3723', 'delete_on_termination': True}}, 'tenancy': 'default'})
2021-06-05 18:53:28,590 p=1092587 u=snelson n=ansible | PLAY [master] ******************************************************************************************************
2021-06-05 18:53:28,594 p=1092587 u=snelson n=ansible | TASK [Running Kubernetes Master Role name=master] ******************************************************************
2021-06-05 18:53:28,684 p=1092587 u=snelson n=ansible | TASK [master : Add kubeadm Repositories on Master name=kube, description=Kubernetes repo, baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch, enabled=1, gpgcheck=1, gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg] ***
2021-06-05 18:53:30,234 p=1092587 u=snelson n=ansible | [WARNING]: Platform linux on host 54.175.80.240 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-06-05 18:53:30,234 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:53:30,240 p=1092587 u=snelson n=ansible | TASK [master : Installing docker & kubeadm on Master name=['docker', 'kubeadm', 'iproute-tc'], state=present] ******
2021-06-05 18:54:05,830 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:54:05,843 p=1092587 u=snelson n=ansible | TASK [master : Enabling docker & kubelet on Master name={{ item }}, state=started, enabled=True] *******************
2021-06-05 18:54:09,931 p=1092587 u=snelson n=ansible | changed: [54.175.80.240] => (item=docker)
2021-06-05 18:54:12,240 p=1092587 u=snelson n=ansible | changed: [54.175.80.240] => (item=kubelet)
2021-06-05 18:54:12,245 p=1092587 u=snelson n=ansible | TASK [master : Pulling the images of k8s master _raw_params=kubeadm config images pull] ****************************
2021-06-05 18:54:33,862 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:54:33,867 p=1092587 u=snelson n=ansible | TASK [master : Updating Docker cgroup on Master dest=/etc/docker/daemon.json, content={
"exec-opts": ["native.cgroupdriver=systemd"]
}
] ***
2021-06-05 18:54:35,606 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:54:35,610 p=1092587 u=snelson n=ansible | TASK [master : Restart docker on Master name=docker, state=restarted] **********************************************
2021-06-05 18:54:37,682 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:54:37,687 p=1092587 u=snelson n=ansible | TASK [master : Initializing Cluster _raw_params=kubeadm init --pod-network-cidr=10.244.0.0/16 --ignore-preflight-errors=NumCPU --ignore-preflight-errors=Mem] ***
2021-06-05 18:55:01,565 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:55:01,570 p=1092587 u=snelson n=ansible | TASK [master : Setting up kubectl on Master _raw_params=mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
] ***
2021-06-05 18:55:03,057 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:55:03,061 p=1092587 u=snelson n=ansible | TASK [master : Deploying Weave on Master executable=/bin/bash, _raw_params=sudo kubectl apply -f "https://cloud.weave.works/k8s/net?k8s-version=$(sudo kubectl version | base64 | tr -d '\n')"] ***
2021-06-05 18:55:05,479 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:55:05,483 p=1092587 u=snelson n=ansible | TASK [master : Creating kubeadm Join Token _raw_params=kubeadm token create  --print-join-command] *****************
2021-06-05 18:55:06,851 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:55:06,856 p=1092587 u=snelson n=ansible | TASK [master : Cleaning Caches on RAM _raw_params=echo 3 > /proc/sys/vm/drop_caches] *******************************
2021-06-05 18:55:07,764 p=1092587 u=snelson n=ansible | changed: [54.175.80.240]
2021-06-05 18:55:07,768 p=1092587 u=snelson n=ansible | PLAY [workers] *****************************************************************************************************
2021-06-05 18:55:07,774 p=1092587 u=snelson n=ansible | TASK [Running Kubernetes Worker  Role name=worker] *****************************************************************
2021-06-05 18:55:07,843 p=1092587 u=snelson n=ansible | TASK [worker : Add kubeadm Repositories on Worker Node name=kube, description=Kubernetes repo, baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-$basearch, enabled=1, gpgcheck=1, gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg] ***
2021-06-05 18:55:09,340 p=1092587 u=snelson n=ansible | [WARNING]: Platform linux on host 52.73.27.129 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-06-05 18:55:09,341 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:55:09,342 p=1092587 u=snelson n=ansible | [WARNING]: Platform linux on host 100.25.46.44 is using the discovered Python interpreter at /usr/bin/python, but
future installation of another Python interpreter could change this. See
https://docs.ansible.com/ansible/2.9/reference_appendices/interpreter_discovery.html for more information.

2021-06-05 18:55:09,343 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:55:09,346 p=1092587 u=snelson n=ansible | TASK [worker : Installing docker & kubeadm on Worker name=['docker', 'kubeadm', 'iproute-tc'], state=present] ******
2021-06-05 18:55:44,138 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:55:44,463 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:55:44,468 p=1092587 u=snelson n=ansible | TASK [worker : Staring & enabling docker & kubelet on Worker name={{ item }}, state=started, enabled=True] *********
2021-06-05 18:55:48,271 p=1092587 u=snelson n=ansible | changed: [52.73.27.129] => (item=docker)
2021-06-05 18:55:48,394 p=1092587 u=snelson n=ansible | changed: [100.25.46.44] => (item=docker)
2021-06-05 18:55:50,614 p=1092587 u=snelson n=ansible | changed: [52.73.27.129] => (item=kubelet)
2021-06-05 18:55:51,046 p=1092587 u=snelson n=ansible | changed: [100.25.46.44] => (item=kubelet)
2021-06-05 18:55:51,050 p=1092587 u=snelson n=ansible | TASK [worker : Updating docker cgroup on slave dest=/etc/docker/daemon.json, content={
"exec-opts": ["native.cgroupdriver=systemd"]
}
] ***
2021-06-05 18:55:52,679 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:55:52,697 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:55:52,704 p=1092587 u=snelson n=ansible | TASK [worker : Restart docker on Worker name=docker, state=restarted] **********************************************
2021-06-05 18:55:54,582 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:55:54,651 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:55:54,655 p=1092587 u=snelson n=ansible | TASK [worker : Updating IP tables on slave dest=/etc/sysctl.d/k8s.conf, content=net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
] ***
2021-06-05 18:55:56,229 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:55:56,240 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:55:56,244 p=1092587 u=snelson n=ansible | TASK [worker : Reloading sysctl on Worker _raw_params=sysctl --system] *********************************************
2021-06-05 18:55:57,012 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:55:57,019 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:55:57,024 p=1092587 u=snelson n=ansible | TASK [worker : Joining the cluster _raw_params={{ hostvars[groups['master'][0]]['token']['stdout'] }}] *************
2021-06-05 18:56:03,970 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:56:04,008 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:56:04,011 p=1092587 u=snelson n=ansible | TASK [worker : Cleaning Caches on RAM _raw_params=echo 3 > /proc/sys/vm/drop_caches] *******************************
2021-06-05 18:56:05,517 p=1092587 u=snelson n=ansible | changed: [100.25.46.44]
2021-06-05 18:56:05,530 p=1092587 u=snelson n=ansible | changed: [52.73.27.129]
2021-06-05 18:56:05,533 p=1092587 u=snelson n=ansible | PLAY RECAP *********************************************************************************************************
2021-06-05 18:56:05,534 p=1092587 u=snelson n=ansible | 100.25.46.44               : ok=9    changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:56:05,534 p=1092587 u=snelson n=ansible | 52.73.27.129               : ok=9    changed=9    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:56:05,535 p=1092587 u=snelson n=ansible | 54.175.80.240              : ok=11   changed=11   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2021-06-05 18:56:05,535 p=1092587 u=snelson n=ansible | localhost                  : ok=18   changed=14   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
